<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/custom.css">

    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Welcome</li><li class="spacer"></li><li class="chapter-item expanded "><a href="index.html">üëã About: IOTA for Flutter</a></li><li class="chapter-item expanded "><a href="welcome/what-youll-get.html">üíª What you'll get</a></li><li class="chapter-item expanded "><a href="welcome/when-you-are-js-developer/index.html">‚òï When you are JS developer</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="welcome/when-you-are-js-developer/dart-vs.-javascript.html">Dart vs. JavaScript</a></li></ol></li><li class="chapter-item expanded "><a href="welcome/which-resources-you-need.html">‚ú® Which resources you need</a></li><li class="chapter-item expanded "><a href="welcome/how-to-get-the-most-out-of-this-tutorial.html">üßê How to get the most out of this tutorial</a></li><li class="chapter-item expanded "><a href="welcome/what-does-this-tutorial-not-contain.html">‚ö†Ô∏è What does this tutorial NOT contain?</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Fundamentals</li><li class="spacer"></li><li class="chapter-item expanded "><a href="fundamentals/android-studio/index.html">Android Studio</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fundamentals/android-studio/set-up.html">Set up</a></li><li class="chapter-item expanded "><a href="fundamentals/android-studio/essentials.html">Essentials</a></li></ol></li><li class="chapter-item expanded "><a href="fundamentals/xcode/index.html">Xcode</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fundamentals/xcode/set-up.html">Set up</a></li><li class="chapter-item expanded "><a href="fundamentals/xcode/essentials.html">Essentials</a></li></ol></li><li class="chapter-item expanded "><a href="fundamentals/flutter/index.html">Flutter</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fundamentals/flutter/set-up.html">Set up</a></li><li class="chapter-item expanded "><a href="fundamentals/flutter/essentials.html">Essentials</a></li></ol></li><li class="chapter-item expanded "><a href="fundamentals/rust/index.html">Rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fundamentals/rust/set-up.html">Set up</a></li><li class="chapter-item expanded "><a href="fundamentals/rust/essentials.html">Essentials</a></li></ol></li><li class="chapter-item expanded "><a href="fundamentals/ide-visual-studio-code/index.html">IDE: Visual Studio Code</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="fundamentals/ide-visual-studio-code/set-up.html">Set up</a></li><li class="spacer"></li></ol></li><li class="chapter-item expanded "><li class="part-title">Overview</li><li class="spacer"></li><li class="chapter-item expanded "><a href="overview/how-everything-works-together/index.html">üí° How everything works together</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="overview/how-everything-works-together/workflow.html">Workflow</a></li><li class="chapter-item expanded "><a href="overview/how-everything-works-together/handling-code-changes.html">Handling code changes</a></li></ol></li><li class="chapter-item expanded "><a href="overview/cross-compiling.html">üè≠ Cross-Compiling</a></li><li class="chapter-item expanded "><a href="overview/flutter-rust-bridge/index.html">üåÅ Flutter Rust Bridge</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="overview/flutter-rust-bridge/about.html">About</a></li><li class="chapter-item expanded "><a href="overview/flutter-rust-bridge/features.html">Language translations</a></li></ol></li><li class="chapter-item expanded "><a href="overview/iota-libraries.html">üìö IOTA libraries</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><li class="part-title">Building without IOTA</li><li class="spacer"></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-only.html">Flutter only</a></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/index.html">Flutter and Rust</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/index.html">FRB Template App - modified Workflow</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/common-part-1.html">1. Initialization and Rust part</a></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/android-instructions.html">2. Android instructions</a></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/common-macos-ios.html">3. Common macOS/iOS instructions</a></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/macos-instructions.html">4. macOS instructions</a></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/ios-instructions.html">5. iOS instructions</a></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/common-part-2.html">6. Flutter part</a></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/frb-example-app/build-run.html">7. Build and run</a></li></ol></li><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/logging-example-app/index.html">Logging Example App</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="building-without-iota/flutter-and-rust/logging-example-app/resources.html">Resources</a></li></ol></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <figure style="margin:0;width:100%;text-align:center;"><img style="width:150px;box-shadow: 2px 2px 5px  rgba(0, 0, 0, 0.3);border-radius: 22px;" src="assets/logo.png" alt=""></figure>
<h1 id="-about-iota-for-flutter"><a class="header" href="#-about-iota-for-flutter">üëã About: IOTA for Flutter</a></h1>
<hr />
<p>A Tutorial to build modern apps using IOTA, the next generation Distributed Ledger Technology</p>
<hr />
<h2 id="hey-there"><a class="header" href="#hey-there">Hey there!!</a></h2>
<p>Ready to add some sparkle to your app development? Stay here, where we not only support the IOTA Mainnet but also the Shimmer Network! With this flexible approach, developers can easily choose whether to integrate the Chrysalis or the Stardust version into their projects (and let's be honest, who doesn't love a little shimmer in their code)? So why wait? Say hello to Flutter and Rust and join me on this exciting journey and let us make your apps shine!</p>
<blockquote>
<p>In fact, the presented workflow supports both the <em>Shimmer Network</em> (protocol version &quot;Stardust&quot;) and the <em>IOTA Mainnet</em> (protocol version &quot;Chrysalis&quot;). It depends on which library versions you as developer include in your project.</p>
<p>I assume developers are more interested in adopting the Stardust version, so I use the Shimmer (Testnet) and related libraries in my examples. </p>
</blockquote>
<h2 id="background"><a class="header" href="#background">Background</a></h2>
<p>Originally I was searching for a workflow to build real-world products in the form of mobile and desktop applications backed by the Distributed Ledger Technology of IOTA. My goal was and is to facilitate the adoption of IOTA.</p>
<blockquote>
<p>Just to clarify, every time I mention <em>IOTA</em>, I'm also referring to <em>Shimmer</em>. </p>
</blockquote>
<p>I wanted to create a flexible solution that would allow developers to use a reduced technology stack for their projects. With <em>IOTA for Flutter</em>, I believe we've achieved that goal, and I'm excited to share it with the world. And believe me: Coming from Java and JavaScript frameworks I was not at all familiar with Flutter and Rust in the beginning.</p>
<p>I remember those days - the endless hours of debugging, the frustration of hitting the same roadblocks over and over again. But after four long months of trial and error, I finally found the solution with <em>IOTA for Flutter</em>. </p>
<p>This documentation is a condensed tutorial that summarizes everything I learned during that grueling proof-of-concept process. And now, I want to share that knowledge with you. Think of my tutorial as your personal guide to app development for IOTA - a way to save you time and headaches, so you can focus on what really matters.</p>
<p>Now, before you get too excited, I should warn you that app development is still app development, and there's always a chance that things might not work out the way you planned. Trust me, I've been there. But hey, that's half the fun, right? The thrill of the chase, the excitement of finally figuring out that pesky bug - it's all part of the process. Just don't blame me if you find yourself cursing my name at three in the morning when something doesn't work quite right. But hey, if it was easy, everyone would be doing it, right? So let's roll up our sleeves and get to work!</p>
<p><em>IOTA for Flutter</em> is a sponsored project by the Tangle Community Treasury. The funding allows me to organize my collected notes and prepare them for you. At this point, a big thank you to everyone involved!</p>
<h2 id="you-know-flutter-but-not-iota"><a class="header" href="#you-know-flutter-but-not-iota">You know Flutter but not IOTA?</a></h2>
<p>By exploring IOTA, a Distributed Ledger Technology (DLT), you can expand your knowledge and explore the exciting possibilities of new use cases beyond the limitations of Web 2.0. This technology has the potential to revolutionize various industries, such as supply chain management, smart city infrastructure, and digital identity verification.</p>
<p>IOTA is unique in that it is a permissionless, decentralized system designed to enable secure and feeless exchange of value and data transfer between connected actors. Unlike traditional blockchain-based systems, IOTA does not rely on miners to validate transactions. Instead, each transaction verifies two previous transactions, creating a web-like network of transactions called the <em>Tangle</em>. This makes IOTA's DLT highly scalable and able to handle large amounts of transactions with zero fees.</p>
<p>Of course, it's a good idea to take a look at the official websites for IOTA and Shimmer (which is the staging network of IOTA), see below. There, you'll find plenty of resources and information to help you get up some more information about it and what it is used for.</p>
<blockquote>
<p>If you're a Flutter developer who's not familiar with IOTA or Shimmer, don't worry!</p>
</blockquote>
<p>There's no substitute for hands-on experience, and that's where <em>IOTA for Flutter</em> comes in. While the official websites for IOTA and Shimmer provide a great starting point, the best way to truly understand how to use these technologies in your Flutter projects is to give it a try yourself. </p>
<p><em>IOTA for Flutter</em> provides a tutorial-style documentation that walks you through the process of integrating IOTA and Shimmer step-by-step. So don't be afraid to jump in and give it a shot! Who knows, you might just surprise yourself with what you can accomplish.</p>
<p><a href="https://iota.org" target="_blank">üëâ ¬† More information about IOTA</a></p>
<p><a href="https://shimmer.network" target="_blank">üëâ ¬† More information about Shimmer</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-what-youll-get"><a class="header" href="#-what-youll-get">üíª What you'll get</a></h1>
<hr />
<p>Explore the world of Distributed Ledger Technology with a hands-on guide using this Github page, companion repositories, and YouTube videos</p>
<hr />
<h2 id="seamless-user-interfaces-for-human-interaction"><a class="header" href="#seamless-user-interfaces-for-human-interaction">Seamless User Interfaces for human interaction</a></h2>
<figure style="margin:0;"><img src="welcome/../assets/actors.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>This tutorial is about building User Interfaces for human interaction (highlighted in red)</p></figcaption></figure>
<p>The focus of this project is to provide a user interface or interaction capability with IOTA for humans. While IOT devices, machines or smart contracts can also interact with IOTA, the primary goal here is to create a seamless experience for people to connect and engage with IOTA's Layer 1 network.</p>
<p>The main goal is achieved by building mobile and desktop apps. The focus is on the target platforms that Flutter supports, with the caveat that the proof-of-concept has only been tested on iOS, Android, and macOS. </p>
<p>Rust plays a crucial role in <em>IOTA for Flutter</em>, too. All of IOTA's libraries are written in Rust and are referred to as the <strong>Single Source of Truth</strong>. I will explain how these Rust libraries are used as a dependency in a custom library which is cross-compiled and integrated into Flutter.</p>
<h2 id="tutorial-structure-overview-fundamentals-and-practical-chapters"><a class="header" href="#tutorial-structure-overview-fundamentals-and-practical-chapters">Tutorial Structure: Overview, Fundamentals, and Practical Chapters</a></h2>
<p>The <em>IOTA for Flutter</em> tutorial is divided into several sections, including a fundamentals section for preparing what you need, an overview for getting the key concept, and several practical chapters that focus on building real-world products. </p>
<p>To make it easier to follow along with the written text, each practical chapter has a corresponding repository on GitHub. I also provide some videos to demonstrate the resulting app, the workflow and guide users through important steps, so you can watch over my shoulder as I work through the examples. </p>
<blockquote>
<p><strong>The Three Pillars of the Tutorial</strong>: Github Page, Repositories and Videos</p>
</blockquote>
<p>The practical chapters are structured as follows: first, we start with an introductory chapter to build an app with Flutter and Rust without IOTA. This will introduce the Flutter-Rust-Bridge, the glueing part that brings Flutter and Rust together. Then, we dive into building a simple IOTA-powered app, followed by a comprehensive &quot;Shimmer playground&quot; app to demonstrate all Rust libraries in one app. </p>
<p>As a bonus, I provide the code for the MQTT Chat App. In this chapter, I assume that you have gained enough knowledge and experience from the previous practical chapters.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-when-you-are-js-developer"><a class="header" href="#-when-you-are-js-developer">‚òï When you are JS developer</a></h1>
<hr />
<p>Flutter vs. JS Frameworks</p>
<hr />
<p>Hold on to your keyboards because it's time for a chapter that will be more exciting than a cat chasing a laser pointer. We're about to explore how familiar Flutter looks when you compare it to JavaScript frameworks and what other reasons there are top use it - and let me tell you, it's going to be so much fun you might want to put on a party hat.</p>
<p>Well, I know some of you might be thinking, ‚ÄúWait a minute, I'm a JavaScript developer, why should I care about Flutter?‚Äù Well, let me ask you, have you ever heard the phrase ‚ÄúDiversity is the spice of life &quot; heard? Yes, that also applies here. By expanding your skills and learning more about Flutter, you might discover a whole new world of possibilities and solutions to your coding challenges.</p>
<p>So get ready to rock and roll, code warriors, because it's time to expand your programming horizons and discover why Flutter should play a part in your life.</p>
<blockquote>
<p>When I first started learning Flutter, I had zero prior knowledge. To give myself a boost of motivation, I turned to videos to get a better understanding of what Flutter is all about. Watching videos not only helped me to get started with Flutter, but also gave me the confidence to continue learning and building my own apps.</p>
</blockquote>
<h2 id="fun-factor"><a class="header" href="#fun-factor">Fun factor</a></h2>
<p>Google and others provide tools and tons of material that make working with Flutter fun. Here are two examples.</p>
<ol>
<li>
<p>The YouTube Channel of <em>Mitch Koko</em> - he creates stunning user interfaces:</p>
<p><a href="https://www.youtube.com/@createdbykoko" target="_blank">üëâ ¬† üì±I create apps &amp; tutorials about creating appsüë®üèΩ‚Äçüíª</a></p>
</li>
<li>
<p>The official Flutter YouTube Channel - you'll find amongst others:</p>
<p><a href="https://www.youtube.com/playlist?list=PLjxrf2q8roU23XGwz3Km7sQZFTdB996iG" target="_blank">üëâ ¬† Short videos about the weekly widgets or packages</a></p>
</li>
<li>
<p>Packages - widgets for all purposes:</p>
<p><a href="https://pub.dev/" target="_blank">üëâ ¬† The official package repository for Dart and Flutter apps</a></p>
</li>
</ol>
<p>Flutter is like a treasure trove of creative possibilities, just waiting for you to unlock its secrets. With Flutter, you can build stunning user interfaces, craft intricate animations and interactions, and even dip your toes into the wild and wacky world of game development. You'll discover lots of sources of inspiration that will leave you buzzing with excitement. </p>
<p>Later on, you will realize how interacting with Rust libraries empowers you to develop potent products - precisely what you are aiming for.</p>
<h2 id="everything-as-code"><a class="header" href="#everything-as-code">Everything as code!?</a></h2>
<p>In Flutter, a component is a self-contained, reusable piece of a user interface. It is a widget that can be used in a Flutter app to create a specific visual and/or interactive element, such as a button, text field, or image. A component in Flutter can be composed of other components, making it possible to create complex UIs by assembling smaller, reusable parts.</p>
<p>Doesn't that sound familiar to you!? </p>
<p>Let's compare a single Flutter widget with a Vue.js component. In Flutter you write the whole component as Dart code:</p>
<pre><code>import 'package:flutter/material.dart';

class MyButton extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return ElevatedButton(
      onPressed: () {
        print('Button clicked');
      },
      child: Text(
        'Klick mich!',
        style: TextStyle(color: Colors.white),
      ),
      style: ButtonStyle(
        backgroundColor: MaterialStateProperty.all&lt;Color&gt;(Colors.green),
        shape: MaterialStateProperty.all&lt;RoundedRectangleBorder&gt;(
          RoundedRectangleBorder(
            borderRadius: BorderRadius.circular(20),
          ),
        ),
      ),
    );
  }
}
</code></pre>
<p>In Vue.js it looks like:</p>
<pre><code>&lt;template&gt;
  &lt;button @click=&quot;handleClick&quot; class=&quot;my-button&quot;&gt;Klick mich!&lt;/button&gt;
&lt;/template&gt;

&lt;script&gt;
export default {
  methods: {
    handleClick() {
      console.log('Button clicked');
    }
  }
}
&lt;/script&gt;

&lt;style&gt;
.my-button {
  background-color: green;
  color: white;
  padding: 10px;
  border: none;
  border-radius: 20px;
  cursor: pointer;
}
&lt;/style&gt;
</code></pre>
<p>Yes, yes, yes, I hear some of you saying that everything as code isn't nice. </p>
<h3 id="so-where-is-the-benefit"><a class="header" href="#so-where-is-the-benefit">So where is the benefit?</a></h3>
<p>Flutter's approach of writing everything as code provides a more streamlined and cohesive development experience compared to the traditional separation of HTML, CSS, and JS. With Flutter, you can create custom user interfaces and animations with greater ease and control, and the resulting apps are faster and smaller. Plus, no more switching between different languages and files like a mad scientist!</p>
<p>A very important difference to JavaScript Frameworks is: Flutter compiles the Dart code to native machine code. Theoretically you have the control over every pixel on the screen. BTW, this also differs from React Native where written code is compiled only to the native UI components.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="dart-vs-javascript"><a class="header" href="#dart-vs-javascript">Dart vs. JavaScript</a></h1>
<hr />
<p>Just a few examples to show you'll feel familiar - but you'll also have to learn new rules</p>
<hr />
<p>Below, you'll find a completely incomplete list ü§™, but it is intended to show that there are many similarities between Dart and JavaScript, making it easier to switch between the two languages or even learn both simultaneously. There are other rules too, but you can easily learn them.</p>
<p>Some more comprehensive information you can find in the official docs. Here are two links:</p>
<p><a href="https://docs.flutter.dev/get-started/flutter-for/web-devs" target="_blank">üëâ ¬† Flutter for web developers</a></p>
<p><a href="https://dart.dev/guides/language/coming-from/js-to-dart" target="_blank">üëâ ¬† Learning Dart as a JavaScript developer</a></p>
<h3 id="variable-declaration"><a class="header" href="#variable-declaration">Variable declaration</a></h3>
<p>Like in JavaScript, in Dart <code>var</code> is short for variable. It is used to declare a variable whose type is <em>statically inferred</em>:</p>
<pre><code class="language-dart">var mystr = &quot;shimmer&quot;;
</code></pre>
<p>In the example above, we declare a variable of type <code>String</code>. One of the convenient features of Dart is that it's able to infer the type of a variable based on the value that's assigned to it. Here, it's quite evident that it's a String type.</p>
<p>But unlike JavaScript, you CANNOT change the type of the variable afterwards!</p>
<pre><code class="language-dart">var mystr = &quot;shimmer&quot;;
mystr = 10; // THIS ASSIGNMENT DOESN'T WORK!
</code></pre>
<p>When we attempt to change the type of a variable in Dart, the compiler will generate an error. This is because Dart is a statically typed language, which means that the data type of a variable is determined at compile-time and cannot be changed during runtime.</p>
<p>Another way to declare variables is the explicit type declaration:</p>
<pre><code class="language-dart">String mystr = &quot;shimmer&quot;;
</code></pre>
<p>In Dart, it's generally considered good practice to explicitly declare the data type of a property when defining a class. This helps to ensure that the code is more easily understood and maintainable, especially when working on larger projects with multiple developers.</p>
<p>For variables within smaller scopes, such as a method, the &quot;var&quot; keyword can be used instead of explicitly declaring the data type. This is because the scope is smaller and it's often easier to infer the type of the variable based on the context of the code.</p>
<pre><code class="language-dart">class MyCat {
   String cat = &quot;Bob&quot;;

   void someMethod() {
     var anotherVariable = &quot;Tom&quot;;
   }
}
</code></pre>
<h3 id="defining-a-function"><a class="header" href="#defining-a-function">Defining a function</a></h3>
<h5 id="javascript"><a class="header" href="#javascript">JavaScript</a></h5>
<pre><code class="language-javascript">function addNumbers(a, b) {
  return a + b;
}
</code></pre>
<h5 id="dart"><a class="header" href="#dart">Dart</a></h5>
<pre><code class="language-dart">int addNumbers(int a, int b) {
  return a + b;
}
</code></pre>
<h3 id="working-with-arrays"><a class="header" href="#working-with-arrays">Working with arrays</a></h3>
<h5 id="javascript-1"><a class="header" href="#javascript-1">JavaScript</a></h5>
<pre><code class="language-javascript">var fruits = [&quot;apple&quot;, &quot;strawberry&quot;, &quot;cherry&quot;];
fruits.push(&quot;kiwi&quot;);
</code></pre>
<h5 id="dart-1"><a class="header" href="#dart-1">Dart</a></h5>
<pre><code class="language-dart">List&lt;String&gt; fruits = ['apple', 'strawberry', 'cherry'];
fruits.add('kiwi');
</code></pre>
<h3 id="using-dot-notation-to-access-object-properties-and-methods"><a class="header" href="#using-dot-notation-to-access-object-properties-and-methods">Using dot notation to access object properties and methods</a></h3>
<h5 id="javascript-2"><a class="header" href="#javascript-2">JavaScript</a></h5>
<pre><code class="language-javascript">class Person {
  constructor() {
    this.name = &quot;&quot;;
    this.age = 0;
  }

  greet() {
    console.log(
      `Hello, my name is ${this.name} and I'm ${this.age} years old.`
    );
  }
}

var person = new Person();
person.name = &quot;Joe&quot;;
person.age = 44;
person.greet();
</code></pre>
<h5 id="dart-2"><a class="header" href="#dart-2">Dart</a></h5>
<pre><code class="language-dart">class Person {
  String name;
  int age;

  void greet() {
    print(&quot;Hello, my name is $name and I'm $age years old.&quot;);
  }
}

var person = Person();
person.name = &quot;Joe&quot;;
person.age = 44;
person.greet();
</code></pre>
<h3 id="usage-of-string-interpolation"><a class="header" href="#usage-of-string-interpolation">Usage of string interpolation</a></h3>
<h5 id="javascript-3"><a class="header" href="#javascript-3">JavaScript</a></h5>
<pre><code class="language-javascript">var name = &quot;Joe&quot;;
console.log(`Hello, my name is ${name}`);
</code></pre>
<h5 id="dart-3"><a class="header" href="#dart-3">Dart</a></h5>
<pre><code class="language-dart">var name = &quot;Joe&quot;;
print(&quot;Hello, my name is $name&quot;);
</code></pre>
<h3 id="usage-of-operators"><a class="header" href="#usage-of-operators">Usage of operators</a></h3>
<h5 id="javascript-4"><a class="header" href="#javascript-4">JavaScript</a></h5>
<pre><code class="language-javascript">var x = 10;
var y = 5;
var z = x + y;
</code></pre>
<h5 id="dart-4"><a class="header" href="#dart-4">Dart</a></h5>
<pre><code class="language-dart">var x = 10;
var y = 5;
var z = x + y;
</code></pre>
<h3 id="usage-of-if-statements"><a class="header" href="#usage-of-if-statements">Usage of <code>if</code> statements</a></h3>
<h5 id="javascript-5"><a class="header" href="#javascript-5">JavaScript</a></h5>
<pre><code class="language-javascript">var age = 25;
if (age &gt;= 18) {
  console.log(&quot;You are an adult&quot;);
} else {
  console.log(&quot;You are a minor&quot;);
}
</code></pre>
<h5 id="dart-5"><a class="header" href="#dart-5">Dart</a></h5>
<pre><code class="language-dart">var age = 25;
if (age &gt;= 18) {
  print(&quot;You are an adult&quot;);
} else {
  print(&quot;You are a minor&quot;);
}
</code></pre>
<h3 id="usage-of-switch-statements"><a class="header" href="#usage-of-switch-statements">Usage of <code>switch</code> statements</a></h3>
<h5 id="javascript-6"><a class="header" href="#javascript-6">JavaScript</a></h5>
<pre><code class="language-javascript">var fruit = &quot;apple&quot;;
switch (fruit) {
  case &quot;banana&quot;:
    console.log(&quot;This is a banana&quot;);
    break;
  case &quot;apple&quot;:
    console.log(&quot;This is an apple&quot;);
    break;
  default:
    console.log(&quot;This is not a fruit&quot;);
}
</code></pre>
<h5 id="dart-6"><a class="header" href="#dart-6">Dart</a></h5>
<pre><code class="language-dart">var fruit = &quot;apple&quot;;
switch (fruit) {
  case &quot;banana&quot;:
    print(&quot;This is a banana&quot;);
    break;
  case &quot;apple&quot;:
    print(&quot;This is an apple&quot;);
    break;
  default:
    print(&quot;This is not a fruit&quot;);
}
</code></pre>
<h3 id="usage-of-try-catch-blocks"><a class="header" href="#usage-of-try-catch-blocks">Usage of <code>try-catch</code> blocks</a></h3>
<h5 id="javascript-7"><a class="header" href="#javascript-7">JavaScript</a></h5>
<pre><code class="language-javascript">try {
  // code that may throw an error
} catch (error) {
  console.log(`Error: ${error.message}`);
}
</code></pre>
<h5 id="dart-7"><a class="header" href="#dart-7">Dart</a></h5>
<pre><code class="language-dart">try {
  // code that may throw an error
} catch (error) {
  print(&quot;Error: ${error.toString()}&quot;);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-which-resources-you-need"><a class="header" href="#-which-resources-you-need">‚ú® Which resources you need</a></h1>
<hr />
<p>Meeting listed requirements of the used tools is a must, with some additional needs</p>
<hr />
<h2 id="lots-of-free-gb"><a class="header" href="#lots-of-free-gb">Lots of free GB</a></h2>
<p>XCode, Android Studio, the SDKs and Virtual Devices, all that stuff needs GBs on your disc. Welcome to app development! Additionally it turns out that the cross-compiling process to build the libraries takes an enormous amount of disk space PER target, too.</p>
<h3 id="xcode"><a class="header" href="#xcode">XCode</a></h3>
<p>As you continue to use Xcode, the available storage on your hard drive gradually decreases. This is because numerous files are generated automatically during project builds, with a significant amount of them being stored in the Derived Data folder. This folder alone can occupy anywhere from a few hundred MB to several GB of space.</p>
<figure style="margin:0;"><img src="welcome/../assets/derived_data.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Disc space used by derived data</p></figcaption></figure>
<p>Fortunately, you can easily remove files from this folder without any adverse effects. By doing so, you can recover valuable space on your Mac, making it more efficient to work with Xcode.</p>
<h3 id="building-apps"><a class="header" href="#building-apps">Building apps</a></h3>
<p>If you build more apps and cross-compile more targets, the disk space usage increases. However, you can safely remove these subfolders. The only difference it makes is in terms of time - the first build will take longer if the target folder has been deleted.</p>
<figure style="margin:0;"><img src="welcome/../assets/playground_build.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Disc space used by build targets of example app "Playground"</p></figcaption></figure>
<h2 id="required-devices-for-testing-and-running"><a class="header" href="#required-devices-for-testing-and-running">Required Devices for Testing and Running</a></h2>
<p>Although you can develop code for all platforms on a single machine, you can only execute and test iOS and macOS applications on macOS devices, Windows applications on Windows devices, and Linux applications on Linux devices.</p>
<p>I haven't tried Windows and Linux Cross-Platform Development, see also: 
<a href="welcome/what-does-this-tutorial-not-contain.html">What does this tutorial NOT contain</a></p>
<h2 id="the-key-resource"><a class="header" href="#the-key-resource">The Key Resource</a></h2>
<p>Finally, the most important resources is: <strong>YOU</strong></p>
<p>You need to be patient, you may experience some hair-pulling moments when things grind to a halt, but when it finally all comes together, it's like hitting a bullseye on a dartboard - satisfying as heck!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-how-to-get-the-most-out-of-this-tutorial"><a class="header" href="#-how-to-get-the-most-out-of-this-tutorial">üßê How to get the most out of this tutorial</a></h1>
<hr />
<p>Recommendations for a successful integration</p>
<hr />
<p>Chapter by chapter I will explain you the steps to connect Flutter and Rust to IOTA. I therefore recommend that you also read section by section and follow the steps.</p>
<p>Second, I advise you to set up a project from scratch. I know it can be tempting to just download the code from the repository and run it, but there's a good chance you'll run into problems.</p>
<p>Due to the different versions of Rust and Flutter you may have, it's safest to follow the step-by-step instructions and selectively include specific files in your own project.</p>
<p>Another reason is that not only will you learn more about the intricacies of setup, but you'll also be better equipped to troubleshoot any problems that arise.</p>
<p>I want you to be successful and not frustrated.</p>
<p>Finally, when you include the code snippets, feel free to try refactoring them if you don't like the coding style. Keep in mind that I'm not producing the cleanest, best code, I just want to get things working. Everything else is nice to have.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-what-does-this-tutorial-not-contain"><a class="header" href="#-what-does-this-tutorial-not-contain">‚ö†Ô∏è What does this tutorial NOT contain?</a></h1>
<hr />
<p>A disclaimer before the main event starts</p>
<hr />
<p>Welcome to the section where we clear up any misunderstandings before you dive in! Think of it as the disclaimer before the main event, like when they tell you not to try the stunts you see in action movies at home.</p>
<p>So, what can you expect from this tutorial? We'll cover how to connect Flutter and Rust to IOTA, but let's make it crystal clear what's not on the menu. </p>
<p>First, we won't go into detailed explanations of IOTA - we'll leave the philosophical musings to the experts.</p>
<p>Also, this tutorial assumes you've already got Xcode, Android Studio, Flutter, and Rust up and running, so we won't bore you with deep installation instructions. Yes, there are sections called &quot;Set up&quot;, but please understand that I can't deeply dive in but only can give you the right links and useful hints.</p>
<p>And sorry, no teaching of Dart or Rust - I'll assume that it's on your bucket list and you know what you're doing!</p>
<p>Finally, I won't be exploring the proof-of-concept for Linux, Windows, browsers, or browser extensions - this ain't no Cirque du Soleil show. I am using a Mac and so my personal means are limited.</p>
<p>And don't expect any deployment or production readiness insights - we'll let you handle the red carpet rollout yourself.</p>
<blockquote>
<h1 id="so-now-that-weve-cleared-the-air-lets-get-started-grab-your-coffee-fire-up-your-ide-and-lets-dive-into-the-world-of-flutter-rust-and-iota"><a class="header" href="#so-now-that-weve-cleared-the-air-lets-get-started-grab-your-coffee-fire-up-your-ide-and-lets-dive-into-the-world-of-flutter-rust-and-iota">So, now that we've cleared the air, let's get started. Grab your coffee, fire up your IDE and let's dive into the world of Flutter, Rust and IOTA!</a></h1>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="android-studio"><a class="header" href="#android-studio">Android Studio</a></h1>
<hr />
<p>For macOS, Windows and Linux: Get the official Integrated Development Environment (IDE) for Android app development.</p>
<hr />
<figure style="margin:0;">
<a href="https://flutter.dev" target="_blank">
<img src="fundamentals/android-studio/../../assets/android_studio_website.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Android Studio Website </p></figcaption>
</a>
</figure>
<p>We primarily use Android Studio for managing SDKs and virtual devices, building and running apps, as well as for deployment purposes. However, when it comes to actual coding, we'll be using VS Code as our preferred editor.</p>
<p>So - in the context of Flutter - Android Studio is required for its tools used by Flutter under the hood.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-up"><a class="header" href="#set-up">Set up</a></h1>
<hr />
<p>Installing Android Studio on your system.</p>
<hr />
<h2 id="installing-android-studio"><a class="header" href="#installing-android-studio">Installing Android Studio</a></h2>
<figure style="margin:0;"><img src="fundamentals/android-studio/../../assets/setup/setup.001.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Setting up Android Studio</p></figcaption></figure>
<blockquote>
<p>Install the latest stable version of Android Studio:</p>
<p><a href="https://developer.android.com/studio" target="_blank">üëâ ¬† Download Android Studio</a></p>
</blockquote>
<p>After downloading (several GBs...), install Android Studio:</p>
<ul>
<li>On Mac, drag Android Studio into the Applications folder.</li>
<li>On PC, execute the installer and follow the wizard. Make sure to install also the &quot;Android Virtual Device&quot;.</li>
</ul>
<blockquote>
<p>Avoid Special Characters in your installation path!</p>
</blockquote>
<p>Starting Android Studio the first time, a configuration wizard will start. Use &quot;Custom&quot; option, in order to check &quot;Android SDK&quot;, an Android SDK Platform like &quot;API 33: Android 13.0 (Tiramisu)&quot; and, if selectable, &quot;Android Virtual Device&quot;.</p>
<p>Go on to the next chapter, to get some essentials about the requirements for the development with Flutter and the Flutter Rust Bridge.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="essentials"><a class="header" href="#essentials">Essentials</a></h1>
<hr />
<p>Android Studio with the Flutter Framework and the Flutter Rust Bridge.</p>
<hr />
<h2 id="managing-the-sdks"><a class="header" href="#managing-the-sdks">Managing the SDKs</a></h2>
<p>The <em>SDK Manager</em> is used for managing the software development kit (SDK) components of the Android platform. Its primary purpose is to facilitate the installation, removal, and updating of various SDK packages required for developing Android applications. It allows also to manage and update various <em>SDK Tools</em> that are part of the Android development toolkit, such as the <em>Android SDK Build Tools</em>, the <em>Native Development Kit (NDK)</em>, and more.</p>
<h3 id="how-to-open-sdk-manager"><a class="header" href="#how-to-open-sdk-manager">How to open SDK Manager</a></h3>
<p>Start Android Studio. You can open the <em>SDK Manager</em> in one of the following ways:</p>
<ul>
<li>via the &quot;Welcome to Android Studio&quot; Page: <br />
If this page is open, there is dropdown menu &quot;More Actions&quot;. Open it and select &quot;SDK Manager&quot;.</li>
<li>via the &quot;Tools&quot; Menu: <br />
If Android Studio is open, open the &quot;Tools&quot; menu. You will find the item &quot;SDK Manager&quot;.</li>
<li>via the &quot;Settings&quot;: <br />
Open the &quot;Settings...&quot; in the &quot;Android Studio&quot; menu. <br />
In the window, select the &quot;Appearance &amp; Behavior&quot; -&gt; &quot;System Settings&quot; -&gt; &quot;Android SDK&quot; section.</li>
</ul>
<blockquote>
<p><strong>Hint</strong>: The Android SDK Location can be found here, too.</p>
</blockquote>
<h3 id="sdk-platforms"><a class="header" href="#sdk-platforms">SDK Platforms</a></h3>
<p>To start the development with Flutter use the latest Android SDK Platform.</p>
<figure style="margin:0;">
<img src="fundamentals/android-studio/../../assets/sdk_manager_1.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>SDK Platforms</p></figcaption>
</figure>
<h3 id="sdk-tools"><a class="header" href="#sdk-tools">SDK Tools</a></h3>
<p>In the second Tab, you can select the <em>SDK Tools</em>.</p>
<p>For Flutter development, select:</p>
<ul>
<li>Android SDK Build-Tools</li>
<li>Android SDK Command-line Tools</li>
<li>Android Emulator</li>
<li>Android SDK Platform-Tools</li>
</ul>
<p>To use the Flutter-Rust-Bridge, also select:</p>
<ul>
<li>NDK</li>
</ul>
<figure style="margin:0;">
<img src="fundamentals/android-studio/../../assets/sdk_manager_2.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>SDK Tools</p></figcaption>
</figure>
<h2 id="managing-the-virtual-devices"><a class="header" href="#managing-the-virtual-devices">Managing the Virtual Devices</a></h2>
<p>The Virtual Device Manager is a tool used for managing and creating virtual devices, also known as emulators. Emulators are software-based virtual devices that simulate the hardware and software configurations of real Android devices, allowing developers to test and run their applications without needing physical devices.</p>
<h3 id="how-to-open-the-virtual-device-manager"><a class="header" href="#how-to-open-the-virtual-device-manager">How to open the Virtual Device Manager</a></h3>
<p>Start Android Studio. You can open the <em>Virtual Device Manager</em> in one of the following ways:</p>
<ul>
<li>via the &quot;Welcome to Android Studio&quot; Page: <br />
If this page is open, there is dropdown menu &quot;More Actions&quot;. Open it and select &quot;Virtual Device Manager&quot;.</li>
<li>via the &quot;Tools&quot; Menu: <br />
If Android Studio is open, open the &quot;Tools&quot; menu. You will find the item &quot;Device Manager&quot;.</li>
</ul>
<h3 id="which-virtual-device"><a class="header" href="#which-virtual-device">Which Virtual Device?</a></h3>
<p>If you don't have a Virtual Device yet, click on &quot;Create Device&quot;.</p>
<ul>
<li>Choose a phone, e.g. the &quot;Pixel 6&quot; or &quot;Pixel 3a&quot;</li>
<li>As system image, choose the one corresponding to the installed Android SDK platform! <br />
Keep the <em>ABI</em> in mind, here &quot;arm64-v8a&quot;. The <em>ABI</em> information is used to configure the <em>build.gradle</em> file later, in the context of the Flutter-Rust-Bridge configuration.</li>
<li>For better performance, choose &quot;Hardware - GLES 2.0&quot; for <em>Graphics</em>.</li>
</ul>
<figure style="margin:0;">
<img src="fundamentals/android-studio/../../assets/avd.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Create a Virtual Device</p></figcaption>
</figure>
<h3 id=""><a class="header" href="#"></a></h3>
<h2 id="device-file-explorer"><a class="header" href="#device-file-explorer">Device File Explorer</a></h2>
<p>Open the <em>Virtual Device Manager</em> and start your Virtual Device by clicking on the <em>Play</em> button. You'll notice that there is section called &quot;Device File Explorer&quot;.</p>
<p>Later on, you can refer to the following location to retrieve information regarding stored files (RockDB, Stronghold Snapshot file) in your application's filesystem.</p>
<blockquote>
<p><strong>Path to AVD's filesystem</strong>: Root -&gt; data -&gt; data -&gt; {app.id}</p>
</blockquote>
<figure style="margin:0;">
<img src="fundamentals/android-studio/../../assets/avd.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>AVD filesystem</p></figcaption>
</figure>
<blockquote>
<p>For your information, the location of the cross-compiled Rust library can be found here:</p>
<p>Root -&gt; data -&gt; app -&gt; {temporary folder - use date to find the correct one} -&gt; {app.id} -&gt; lib</p>
</blockquote>
<figure style="margin:0;">
<img src="fundamentals/android-studio/../../assets/avd_filesystem_1.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Location of the cross-compiled Rust library <i>librust.so</i></p></figcaption>
</figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="xcode-1"><a class="header" href="#xcode-1">Xcode</a></h1>
<hr />
<p>For macOS only: Apple's Integrated Development Environment (IDE) for iOS, macOS, watchOS, and tvOS Applications.</p>
<hr />
<figure style="margin:0;">
<a href="https://developer.apple.com/xcode/" target="_blank">
<img src="fundamentals/xcode/../../assets/xcode_website.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Xcode Website</p></figcaption>
</a>
</figure>
<p>Similar to the usage of Android Studio, we use Xcode for managing virtual devices, building and running apps, as well as for deployment purposes. However, when it comes to actual coding, we'll be using VS Code as our preferred editor.</p>
<p>So - in the context of Flutter - Xcode is required for its tools used by Flutter under the hood.</p>
<blockquote>
<p><strong>Important note</strong></p>
<p>During the work with certain IOTA libraries and the <em>Flutter Rust Bridge</em>, it was sometimes necessary to launch the app directly from Xcode. In certain situations, it deviated from the usual procedure of starting the app with &quot;flutter run&quot; and instead required a workaround through Xcode.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-up-1"><a class="header" href="#set-up-1">Set up</a></h1>
<hr />
<p>Installing Xcode on your system.</p>
<hr />
<h2 id="installing-xcode"><a class="header" href="#installing-xcode">Installing Xcode</a></h2>
<figure style="margin:0;"><img src="fundamentals/xcode/../../assets/setup/setup.002.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Setting up Xcode</p></figcaption></figure>
<blockquote>
<p>Download (several GBs...) and install the latest stable version of Xcode using one of these sources:</p>
<p><a href="https://itunes.apple.com/us/app/xcode/id497799835" target="_blank">üëâ ¬† Xcode in Mac App Store</a></p>
<p><a href="https://developer.apple.com/xcode/" target="_blank">üëâ ¬† Xcode Web Download</a></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="essentials-1"><a class="header" href="#essentials-1">Essentials</a></h1>
<hr />
<p>Xcode: Where Complexity Unfolds, Humor Helps Break the Mold.</p>
<hr />
<p>At first glance, Xcode resembles an airplane cockpit: Overwhelming and seemingly impossible to navigate. But here's the thing: You don't need to fiddle with most of the settings.</p>
<p>Flutter has taken care of generating the Xcode project for you. As for the second Xcode project for the Rust library (mentioned below), that's created by cargo-xcode.</p>
<p>So, don't worry! All you need to do is grasp a few essential concepts and locate some helpful resources to find your way around. And hey, who knows, maybe you'll even learn to enjoy the Xcode experience, despite its initial complexity!</p>
<h2 id="project-structure"><a class="header" href="#project-structure">Project structure</a></h2>
<p>A Xcode project follows a specific structure that organizes the various files and resources used to build an macOS or iOS application.</p>
<p><strong>Project File</strong>: A project file with the extension <em>.xcodeproj</em> or <em>.xcworkspace</em> serves as the entry point for the Xcode project. It contains information about the project settings, build configurations, and references to all the project files.</p>
<ul>
<li>The <strong><em>.xcodeproj</em></strong> file is the traditional project file used in Xcode. It represents a single Xcode project and is used for organizing and building a single target, such as an iOS app, extension, or framework. It contains project settings, build configurations, and references to all the project files specific to that target.</li>
<li>The <strong><em>.xcworkspace</em></strong> file, on the other hand, is used when you have multiple Xcode projects or multiple targets that depend on each other. It is a workspace file that can include one or more <em>.xcodeproj</em> files and their associated targets. The <em>.xcworkspace</em> file acts as a container that allows you to work on and build multiple projects or targets together in a unified workspace.</li>
</ul>
<p><strong>Targets</strong>: An Xcode project can have one or more targets. Each target represents a distinct product, such as the main app, extensions, or test suites. Targets contain the necessary build settings, dependencies, and references to source files.</p>
<p><strong>Source Code</strong>: The source code files are organized within groups or folders. The default group is typically named after the project and contains the main application's source code files. Additional groups can be created to organize code files into logical categories or features.</p>
<p><strong>Frameworks and Libraries</strong>: Xcode projects often use external frameworks and libraries to extend functionality or reuse code. These dependencies are managed within the project and are listed in the &quot;Frameworks and Libraries&quot; section. They can be system frameworks, third-party libraries, or custom frameworks.</p>
<blockquote>
<p>In the Flutter/Rust context, the Rust Code is a separate Xcode Project which is included as &quot;subproject&quot; into the main project. This Xcode Project is created by the tool <em>cargo-xcode</em>.</p>
</blockquote>
<p><strong>Configuration Files</strong>: Configuration files, such as <code>Info.plist</code>, contain essential metadata about the application, including its bundle identifier, version, required device capabilities, and permissions.</p>
<p><strong>Build Settings</strong>: Xcode provides an interface to configure build settings for the project and individual targets. These settings control compiler flags, optimization settings, code signing, deployment targets, and various other project-specific configurations.</p>
<figure style="margin:0;">
<a href="fundamentals/xcode/../../assets/xcode/xcode_project.jpg" target="_blank">
<img src="fundamentals/xcode/../../assets/xcode/xcode_project.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Xcode Project (click to enlarge)</p></figcaption>
</a>
</figure>
<p>The interaction of this structure, composed of multiple Xcode projects, becomes more apparent when we build applications for macOS resp. iOS in the practical chapters.</p>
<p>At this stage, it's worth mentioning that there exists a dedicated Rust Xcode project <em>rust.xcodeproj</em>. This project is created during an initialization step of the <em>Flutter Rust Bridge</em> for macOS or iOS. It includes a script (&quot;Build Rule&quot;) that serves the purpose of generating a static or dynamic library and integrating it into the build process of the main Xcode project <em>Runner.xcodeproj</em> for the app.</p>
<h3 id="-1"><a class="header" href="#-1"></a></h3>
<h2 id="static-and-dynamic-libraries"><a class="header" href="#static-and-dynamic-libraries">Static and dynamic libraries</a></h2>
<p>Static and dynamic libraries are both forms of code libraries, but they differ in how they are linked and loaded into an application.</p>
<p><strong>Static Libraries</strong>:</p>
<ul>
<li>A static library, also known as a static link library, is a compiled set of object code that is <strong>linked directly into an executable at the time of compilation</strong>. The library code becomes part of the final executable binary.</li>
<li>When an application is built with a static library, <strong>all the library code is copied into the resulting binary</strong>. This means that the application becomes self-contained and doesn't rely on the presence of the library during runtime.</li>
<li><strong>Static libraries are typically denoted by file extensions like .a (on macOS and iOS) or .lib (on Windows)</strong>. They provide a way to distribute pre-compiled code that can be linked with multiple applications without needing to distribute the library separately.</li>
</ul>
<p><strong>Dynamic Libraries</strong>:</p>
<ul>
<li>A dynamic library, also called a shared library or dynamic link library (DLL), is a separate binary file containing compiled code that <strong>can be loaded and linked by multiple applications at runtime</strong>.</li>
<li>Unlike static libraries, dynamic libraries <strong>are not copied into the application binary</strong>. Instead, the application references the dynamic library and loads it dynamically during runtime.</li>
<li>Dynamic libraries offer advantages such as code sharing among multiple applications and the ability to update the library independently without recompiling the applications that depend on it.</li>
<li><strong>Dynamic libraries are usually denoted by file extensions like .dylib (on macOS and iOS) or .dll (on Windows)</strong>.</li>
</ul>
<h3 id="-2"><a class="header" href="#-2"></a></h3>
<h2 id="ide-basics"><a class="header" href="#ide-basics">IDE Basics</a></h2>
<h3 id="project-navigator"><a class="header" href="#project-navigator">Project Navigator</a></h3>
<p>Click on the leftmost symbol in the left pane. This will activate the <em>Project Navigator</em>. It can be used to configure project settings or adjust the project structure, such as adding libraries or other Xcode projects (by dragging them into the workspace).</p>
<figure style="margin:0;">
<a href="fundamentals/xcode/../../assets/xcode/xcode_ide.001.jpg" target="_blank">
<img src="fundamentals/xcode/../../assets/xcode/xcode_ide.001.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Project Navigator (click to enlarge)</p></figcaption>
</a>
</figure>
<h3 id="device-or-simulator-selection--launch-the-app-manually"><a class="header" href="#device-or-simulator-selection--launch-the-app-manually">Device or Simulator Selection / Launch the app manually</a></h3>
<p>Normally, Flutter automatically builds and launches the macOS/iOS app. It uses the preselected device (if connected to your Mac) or Simulator.</p>
<p>You can switch the device by selecting a different one from the drop-down menu.</p>
<p>In some cases, you may need to manually start your app instead of using Flutter. In such cases, use the Play button.</p>
<figure style="margin:0;">
<a href="fundamentals/xcode/../../assets/xcode/xcode_ide.002.jpg" target="_blank">
<img src="fundamentals/xcode/../../assets/xcode/xcode_ide.002.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Device Selection and Start App (click to enlarge)</p></figcaption>
</a>
</figure>
<h3 id="report-navigator"><a class="header" href="#report-navigator">Report Navigator</a></h3>
<figure style="margin:0;">
<a href="fundamentals/xcode/../../assets/xcode/xcode_ide.003.jpg" target="_blank">
<img src="fundamentals/xcode/../../assets/xcode/xcode_ide.003.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Report Navigator (click to enlarge)</p></figcaption>
</a>
</figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flutter"><a class="header" href="#flutter">Flutter</a></h1>
<hr />
<p>Building Cross-Platform Apps with Simplicity</p>
<hr />
<figure style="margin:0;">
<a href="https://flutter.dev" target="_blank">
<img src="fundamentals/flutter/../../assets/flutter.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Flutter Website </p></figcaption>
</a>
</figure>
<p>Flutter, developed by Google, aims to provide developers with a unified codebase to build cross-platform applications that can be deployed on various targets. Originally designed to support mobile devices, Flutter has expanded its reach to include desktop platforms such as macOS, Windows, and Linux, as well as browser applications.</p>
<figure style="margin:0;">
<a href="https://acad.link/flutter" target="_blank">
<img src="fundamentals/flutter/../../assets/what_is_flutter.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Courtesy of Academind / Maximilian Schwarzm√ºller</p></figcaption>
</a>
</figure>
<p>At its core, Flutter consists of two main components: the UI Framework and a Collection of Tools. The UI Framework encompasses a rich set of code packages that empower developers to create visually appealing user interfaces. The collection of tools, on the other hand, enables the transformation of a single codebase into machine code capable of running on diverse platforms.</p>
<figure style="margin:0;">
<a href="https://acad.link/flutter" target="_blank">
<img src="fundamentals/flutter/../../assets/target_platforms.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Courtesy of Academind / Maximilian Schwarzm√ºller</p></figcaption>
</a>
</figure>
<p>Flutter uses Dart as programming language. It's important to note that while you can write Dart code for all platforms using Flutter, there are specific requirements for building and testing applications on different targets. Building apps for iOS/macOS necessitates a macOS computer with XCode installed, while building and running Windows apps requires a Windows machine, and the same goes for Linux. However, developing Android and browser apps can be done on any host machine, as Android Studio is compatible with multiple operating systems.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-up-2"><a class="header" href="#set-up-2">Set up</a></h1>
<hr />
<p>Installing and upgrading Flutter on your system.</p>
<hr />
<h2 id="installing-flutter"><a class="header" href="#installing-flutter">Installing Flutter</a></h2>
<figure style="margin:0;"><img src="fundamentals/flutter/../../assets/setup/setup.003.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Setting up Flutter</p></figcaption></figure>
<blockquote>
<p>For the most accurate and up-to-date installation instructions, please refer to the official guide:</p>
<p><a href="https://docs.flutter.dev/get-started/install" target="_blank">üëâ ¬† Flutter Website - Get Started - Install Flutter</a></p>
<p>Avoid Special Characters and Blanks in your installation path!</p>
</blockquote>
<p>When installing Flutter, it's important to note the differences between Mac and Windows systems. One of the system requirements is having Git installed, as Flutter utilizes it for installation and updates. On Windows, Git needs to be installed separately. However, on Mac, Git is conveniently included in Xcode. For a smooth installation experience, it is recommended to install Xcode before Flutter on Mac systems.</p>
<blockquote>
<p><strong>Mac Users</strong></p>
<p>Even if you already have Xcode installed, go through the installation guide and check each step! For example, don't forget to add the Xcode Command-line tools.</p>
<p>Side notes</p>
<ul>
<li>To find out which shell you are using: <code>echo $SHELL</code></li>
<li>To toggle hidden directories and files: <code>command + shift + .</code></li>
</ul>
</blockquote>
<h3 id="-3"><a class="header" href="#-3"></a></h3>
<h3 id="installation-tipp"><a class="header" href="#installation-tipp">Installation Tipp</a></h3>
<p>If you're more inclined to watch an installation video, I've got a fantastic recommendation for you: I highly recommend checking out the tutorials by Maximilian Schwarzm√ºller from Academind.</p>
<blockquote>
<p>Now, let me make one thing clear ‚Äî I'm not affiliated with Academind, and they definitely haven't slipped me any advertising cash (unfortunately). But I genuinely appreciate Max's work and the crystal-clear instructions he provides.</p>
</blockquote>
<p>So, I wholeheartedly encourage you to check out his tutorial about <em>Flutter &amp; Dart (&quot;The complete guide [2023 Edition]&quot;)</em> and see for yourself. Don't just take my word for it, folks! Discover the wonders of Flutter installation with Max's delightful guidance. There are <strong>several free videos</strong>: amongst others you'll find a guide about the <em><strong>macOS Setup</strong></em> and one about the <em><strong>Windows Setup</strong></em>!</p>
<figure style="margin:0;">
<a href="https://acad.link/flutter" target="_blank">
<img src="fundamentals/flutter/../../assets/setup/macOS_setup.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Courtesy of Academind / Maximilian Schwarzm√ºller</p></figcaption>
</a>
</figure>
<h3 id="-4"><a class="header" href="#-4"></a></h3>
<h2 id="upgrading-flutter"><a class="header" href="#upgrading-flutter">Upgrading Flutter</a></h2>
<p>To update the Flutter SDK use this command:</p>
<p><code>flutter upgrade</code></p>
<p>To update to the latest compatible versions of all the dependencies listed in the pubspec.yaml file, use the <em>flutter pub</em> command:</p>
<p><code>flutter pub upgrade</code></p>
<p>Use this link for more information:</p>
<p><a href="https://docs.flutter.dev/release/upgrade" target="_blank">üëâ ¬† Flutter Docs - Stay up to date - Upgrade</a></p>
<h3 id="-5"><a class="header" href="#-5"></a></h3>
<h2 id="useful-commands"><a class="header" href="#useful-commands">Useful commands</a></h2>
<ul>
<li>
<p>To find out where your Flutter SDK is located:</p>
<p><code>which flutter</code> or <code>where flutter</code></p>
</li>
<li>
<p>To find out which Flutter Version is installed:</p>
<p><code>flutter --version</code></p>
</li>
<li>
<p>To check the Flutter related tools on your working environment:</p>
<p><code>flutter doctor</code></p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="essentials-2"><a class="header" href="#essentials-2">Essentials</a></h1>
<hr />
<p>A glimpse into the project basics.</p>
<hr />
<h2 id="project-structure-1"><a class="header" href="#project-structure-1">Project structure</a></h2>
<p>A typical Flutter project follows a specific structure that organizes the various components and resources of the application. Here is a description of the common project structure in a Flutter project:</p>
<p><strong>android</strong>: This directory contains the Android-specific files and configurations for the Flutter project. It includes the Android manifest file, Gradle build scripts, and other resources specific to the Android platform.</p>
<p><strong>ios</strong>: This directory holds the iOS-specific files and configurations. It includes the Xcode project, property list files, and other resources specific to iOS development.</p>
<p><strong>lib</strong>: The lib directory is where the main Dart code for the Flutter application resides. It contains the main.dart file, which serves as the entry point for the application. Additionally, you can organize your code into multiple files or directories within the lib directory to improve code modularity and maintainability.</p>
<p><strong>macos</strong>: This directory holds the macOS-specific files and configurations. It includes the Xcode project, property list files, and other resources specific to macOS development.</p>
<p><strong>test</strong>: The test directory is used for writing unit tests and integration tests for your Flutter application. It typically contains test files and directories to organize your test code.</p>
<p><strong>assets</strong>: The assets directory is where you can store static files such as images, fonts, and other resources required by your application. These files can be accessed using Flutter's asset management system.</p>
<p><strong>pubspec.yaml</strong>: The pubspec.yaml file is a YAML-formatted configuration file that defines the project's metadata, dependencies, and assets. It specifies the required packages, version constraints, and additional resources like fonts or images.</p>
<figure style="margin:0;"><img src="fundamentals/flutter/../../assets/flutter_project_structure.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Project Structure</p></figcaption></figure>
<h2 id="packages"><a class="header" href="#packages">Packages</a></h2>
<p>Packages (&quot;Plugins&quot;) refer to pre-built libraries or modules that developers can use to add specific functionalities or features to their Flutter applications. They are created by the Flutter community, as well as by the official Flutter team at Google, and they help streamline the development process by providing ready-to-use code solutions for common tasks.</p>
<p><a href="https://pub.dev/" target="_blank">üëâ ¬† The official package repository for Dart and Flutter apps.</a></p>
<h3 id="example-flutter-chat-ui"><a class="header" href="#example-flutter-chat-ui">Example: Flutter Chat UI</a></h3>
<p>In my &quot;MQTT Chat App&quot; project, I utilized the &quot;Flutter Chat UI&quot; package to swiftly integrate a chat user interface and interactive functionality with just a single installation instruction!</p>
<figure style="margin:0;">
<a href="https://pub.dev/packages/flutter_chat_ui" target="_blank">
<img src="fundamentals/flutter/../../assets/flutter_chat_ui.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Package example: Flutter Chat UI</p></figcaption>
</a>
</figure>
<h2 id="package-manager--configuration-file"><a class="header" href="#package-manager--configuration-file">Package Manager &amp; Configuration file</a></h2>
<p>The Package Manager is used to manage dependencies, define project metadata, configure project-specific settings and facilitate the development workflow.</p>
<table style="display: flex; justify-content: left;">
<tr>
<th style="text-align:left;padding:5px 20px;"></th>
<th style="text-align:left;padding:5px 20px;">Flutter / Dart</th>
<th style="text-align:left;padding:5px 20px;opacity:0.5;">Rust</th>
<th style="text-align:left;padding:5px 20px;opacity:0.5;">JavaScript / Node.js</th>
</tr>
<tr>
<td style="white-space:nowrap;vertical-align:top;"><b>Package Manager</b></td>
<td style="white-space:nowrap;vertical-align:top;">Pub</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">Cargo</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">npm</td>
</tr>
<tr>
<td style="white-space:nowrap;vertical-align:top;"><b>Configuration File</b></td>
<td style="white-space:nowrap;vertical-align:top;">pubspec.yaml</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">Cargo.toml</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">package.json</td>
</tr>
<tr>
<td style="white-space:nowrap;vertical-align:top;"><b>Package Repository</b></td>
<td style="white-space:nowrap;vertical-align:top;">https://pub.dev</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">https://crates.io</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">https://npmjs.org</td>
</tr></table>
<h3 id="-6"><a class="header" href="#-6"></a></h3>
<blockquote>
<p>To add a package/plugin use the command:</p>
<p><code>flutter pub add &lt;package&gt;</code></p>
</blockquote>
<p>Once the package is installed, you'll find a list entry in the <em>pubspec.yaml</em> file, as dependency.</p>
<h3 id="example-pubspecyaml-of-mqtt-chat-app"><a class="header" href="#example-pubspecyaml-of-mqtt-chat-app">Example: pubspec.yaml of MQTT Chat App</a></h3>
<pre><code>name: mqttchat
description: A new Flutter project.
publish_to: &quot;none&quot; # Remove this line if you wish to publish to pub.dev
version: 1.0.0+1

environment:
  sdk: &quot;&gt;=2.19.0 &lt;3.0.0&quot;

dependencies:
  flutter:
    sdk: flutter

  cupertino_icons: ^1.0.2
  ffi: ^2.0.1
  flutter_rust_bridge: ^1.61.1
  freezed_annotation: ^2.2.0
  flutter_chat_ui: ^1.6.6
  ...
  uuid: ^3.0.7
  shared_preferences: ^2.0.17

dev_dependencies:
  flutter_test:
    sdk: flutter

  flutter_lints: ^2.0.0
  ffigen: ^7.2.4
  build_runner: ^2.3.3
  freezed: ^2.3.2

flutter:
  uses-material-design: true

  assets:
    - assets/messages.json
    - assets/smr.png
</code></pre>
<h2 id="creating-a-project"><a class="header" href="#creating-a-project">Creating a project</a></h2>
<blockquote>
<p><strong>Very important hints</strong></p>
<ol>
<li>
<p>Don't use special characters or blanks (use &quot;_&quot; instead) as project name and in your absolute project path!</p>
</li>
<li>
<p>Don't name your project like an existing public package! It could lead to circular dependencies. See the <a href="fundamentals/flutter/../../building-without-iota/flutter-and-rust/logging-example-app/resources.html">Logging Example App -&gt; Resources</a> section as example.</p>
</li>
</ol>
</blockquote>
<p>To create an &quot;empty&quot; app use the command:</p>
<p><code>flutter create --empty &lt;project_name&gt;</code></p>
<p>To create Flutter's &quot;default&quot; app use the command:</p>
<p><code>flutter create &lt;project_name&gt;</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust"><a class="header" href="#rust">Rust</a></h1>
<hr />
<p>Rust is a powerful and modern programming language that prioritizes performance, memory safety, and concurrency.</p>
<hr />
<figure style="margin:0;">
<a href="https://www.rust-lang.org/" target="_blank">
<img src="fundamentals/rust/../../assets/rust_website.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Rust Website </p></figcaption>
</a>
</figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-up-3"><a class="header" href="#set-up-3">Set up</a></h1>
<hr />
<p>Installing Rust on your system.</p>
<hr />
<h2 id="installing-rust"><a class="header" href="#installing-rust">Installing Rust</a></h2>
<figure style="margin:0;"><img src="fundamentals/rust/../../assets/setup/setup.004.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Setting up Rust</p></figcaption></figure>
<blockquote>
<p>Quickly set up your Rust development environment:</p>
<p><a href="https://www.rust-lang.org/tools/install" target="_blank">üëâ ¬† Install Rust</a></p>
<p>Alternatively, use the &quot;Getting started&quot; website:</p>
<p><a href="https://www.rust-lang.org/learn/get-started" target="_blank">üëâ ¬† Rust - Getting started</a></p>
</blockquote>
<p>When installing Rust, the recommended approach is to use <strong>rustup</strong>, a versatile tool that serves as both an installer and version manager for Rust.</p>
<p>With rustup, you gain access to a comprehensive toolset that enhances your Rust development experience. It includes <strong>rustc</strong>, the rust compiler responsible for translating your Rust code into executable binaries or libraries.</p>
<p><strong>Cargo</strong>, another essential component, is the Rust package manager. It also simplifies dependency management, project building, testing, and more, serving as a valuable asset in your Rust workflow.</p>
<p>rustup also offers rustfmt and clippy. rustfmt is a source code formatter that ensures consistent and elegant formatting in your Rust codebase. On the other hand, clippy is a Rust linter that helps identify potential issues and provides helpful suggestions to improve your code.</p>
<p>So, everything starts with installing rustup.</p>
<p>On macOS, Linux, or another Unix-like OS, to download rustup and install Rust, run the following in your terminal, then follow the on-screen instructions.</p>
<p><code>curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh</code></p>
<h3 id="was-the-installation-successful"><a class="header" href="#was-the-installation-successful">Was the installation successful?</a></h3>
<p>Open a <em>new</em> shell and type the following:</p>
<p><code>rustc --version</code></p>
<p>If there is a meaningful output displaying <code>rustc &lt;version&gt;</code> then the installation was successful.</p>
<h2 id="updating-rust"><a class="header" href="#updating-rust">Updating Rust</a></h2>
<p>Rust updates very frequently. If you have installed Rustup some time ago, chances are your Rust version is out of date. Get the latest version of Rust by running:</p>
<p><code>rustup update</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="essentials-3"><a class="header" href="#essentials-3">Essentials</a></h1>
<hr />
<p>A glimpse into the project basics.</p>
<hr />
<h2 id="project-structure-2"><a class="header" href="#project-structure-2">Project structure</a></h2>
<p>A Rust Library Project includes the following elements:</p>
<p><strong>src</strong>: This directory serves as the main location for the library's source code.</p>
<ul>
<li>
<p><strong>lib.rs</strong>: The <code>lib.rs</code> file acts as the entry point. It acts as a central module where you can declare and organize the public items (functions, structs, enums, traits, etc.) that are intended to be accessible to other crates (projects) that depend on the library. These items are marked with the pub visibility keyword to make them visible outside of the library's crate.</p>
</li>
<li>
<p>Additional source code files and subdirectories can be organized within the src directory to maintain a modular and organized codebase.</p>
<blockquote>
<p>In the context of Flutter, Rust and the Flutter Rust Bridge, we organize the structure in the following way: The public functions and structs that are intended to be exposed in the API are code in the file <code>api.rs</code>. This file is then integrated as module into the <code>lib.rs</code> file.</p>
</blockquote>
</li>
</ul>
<p><strong>target</strong>: This directory serves as the build location for the library. It will be automatically created once the <code>cargo build</code> command is used. In this directory, your storage space vanishes into thin air like a magical bunny in a hat! You can remove it whenever you like - but: Deleting comes at the expense of time. During the first build, all necessary resources are loaded, which takes time. If the directory exists, all subsequent builds are faster.</p>
<p><strong>Cargo.toml</strong>: The Cargo.toml file acts as the manifest for the library project, defining metadata such as the package name, version, dependencies, and build configurations.</p>
<p><strong>Cargo.lock</strong>: This file is an automatically generated file. When you build a Rust project using Cargo, it resolves the dependencies specified in the <em>Cargo.toml</em> manifest file and generates the <em>Cargo.lock</em> file. This file includes the specific versions of each dependency and their transitive dependencies that were resolved during the build process.</p>
<figure style="margin:0;"><img src="fundamentals/rust/../../assets/rust_structure.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Project Structure</p></figcaption></figure>
<h2 id="packages--crates"><a class="header" href="#packages--crates">Packages / Crates</a></h2>
<p>A <em>Crate</em> refers to a package or a module of code. Crates act as a unit of code organization and encapsulation, providing a way to manage and share code functionality.</p>
<p>Crates can also have dependencies on other crates, allowing them to utilize external code and libraries. The dependencies are declared in the Cargo.toml file of the crate, under the [dependencies] section.</p>
<blockquote>
<p>In our context, the wallet.rs library (crate name: &quot;iota-wallet&quot;) library includes the iota.rs library (crate name: &quot;iota-client&quot;), amongst others.</p>
</blockquote>
<hr />
<p><a href="https://crates.io" target="_blank">üëâ ¬† The Rust community's crate registry</a></p>
<hr />
<h3 id="example-search-for-iota-crates"><a class="header" href="#example-search-for-iota-crates">Example: Search for &quot;IOTA&quot; crates</a></h3>
<figure style="margin:0;"><img src="fundamentals/rust/../../assets/crates_iota.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Search Result for "IOTA" crates</p></figcaption></figure>
<h2 id="package-manager--configuration-file-1"><a class="header" href="#package-manager--configuration-file-1">Package Manager &amp; Configuration file</a></h2>
<p>The Package Manager is used to manage dependencies, define project metadata, configure project-specific settings and facilitate the development workflow.</p>
<table style="display: flex; justify-content: left;">
<tr>
<th style="text-align:left;padding:5px 20px;"></th>
<th style="text-align:left;padding:5px 20px;opacity:0.5;">Flutter / Dart</th>
<th style="text-align:left;padding:5px 20px;">Rust</th>
<th style="text-align:left;padding:5px 20px;opacity:0.5;">JavaScript / Node.js</th>
</tr>
<tr>
<td style="white-space:nowrap;vertical-align:top;"><b>Package Manager</b></td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">Pub</td>
<td style="white-space:nowrap;vertical-align:top;">Cargo</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">npm</td>
</tr>
<tr>
<td style="white-space:nowrap;vertical-align:top;"><b>Configuration File</b></td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">pubspec.yaml</td>
<td style="white-space:nowrap;vertical-align:top;">Cargo.toml</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">package.json</td>
</tr>
<tr>
<td style="white-space:nowrap;vertical-align:top;"><b>Package Repository</b></td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">https://pub.dev</td>
<td style="white-space:nowrap;vertical-align:top;">https://crates.io</td>
<td style="white-space:nowrap;vertical-align:top;opacity:0.5;">https://npmjs.org</td>
</tr></table>
<h3 id="-7"><a class="header" href="#-7"></a></h3>
<blockquote>
<p>To add a package/crate use the command:</p>
<p><code>cargo add &lt;crate_name&gt;</code></p>
<p><strong>I use the alternative way to include a crate</strong>:</p>
<p>Simply add it directly to the [dependencies] section of the <em>Cargo.toml</em> manifest file.</p>
</blockquote>
<h2 id="rustup-and-toolchains"><a class="header" href="#rustup-and-toolchains">Rustup and Toolchains</a></h2>
<p><a href="https://rust-lang.github.io/rustup/index.html" target="_blank">üëâ ¬† The Rustup documentation</a></p>
<p>Rustup is a version manager that allows you to easily install, manage, and switch between different toolchains.</p>
<p>A toolchain refers to a specific version of the Rust compiler and associated tools that are used to compile, build, and manage projects. It includes the Rust compiler itself, the standard library, and other essential components required for Rust development.</p>
<p>Having multiple toolchains allows developers to work with different Rust language features, test compatibility across versions, and ensure their code works as intended in different Rust environments.</p>
<p>The Terminal command</p>
<p><code>rustup show</code></p>
<p>provides an overview of the Rust installation details, such as the installed toolchains, the currently active toolchain, and the associated components like cross-compiling targets.</p>
<h2 id="creating-a-new-rust-library-project"><a class="header" href="#creating-a-new-rust-library-project">Creating a new Rust Library Project</a></h2>
<blockquote>
<p><strong>Important</strong>: Before you create the new project ensure that you are in the correct folder. To create the Rust Library Project for <em>IOTA for Flutter</em>, the Flutter Project must exist, and your Terminal prompt needs to be in the root directory of the Flutter Project.</p>
</blockquote>
<p>To create the Rust Library Project, execute the command:</p>
<p><code>cargo new --lib &lt;crate_name&gt;</code></p>
<p>I always use the crate name <em>rust</em>. In that case, a new subfolder <em>rust</em> is created.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ide-visual-studio-code"><a class="header" href="#ide-visual-studio-code">IDE: Visual Studio Code</a></h1>
<hr />
<p>In <em>IOTA for Flutter</em> I'm using Visual Studio Code as IDE. But Flutter is a friendly framework that plays well with other editors too!</p>
<hr />
<figure style="margin:0;">
<a href="https://code.visualstudio.com/" target="_blank">
<img src="fundamentals/ide-visual-studio-code/../../assets/vscode_website.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Visual Studio Code Website</p></figcaption>
</a>
</figure>
<blockquote>
<p>To use a different editor, please refer to Flutter's website and the different tabs provided:</p>
<p><a href="https://docs.flutter.dev/get-started/editor?tab=vscode" target="_blank">üëâ ¬† Set up an editor</a></p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-up-4"><a class="header" href="#set-up-4">Set up</a></h1>
<hr />
<p>Installing Visual Studio Code on your system.</p>
<hr />
<h2 id="installing-vs-code"><a class="header" href="#installing-vs-code">Installing VS Code</a></h2>
<figure style="margin:0;"><img src="fundamentals/ide-visual-studio-code/../../assets/setup/setup.005.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Setting up Visual Studio Code</p></figcaption></figure>
<blockquote>
<p>Install the latest stable version of VS Code:</p>
<p><a href="https://code.visualstudio.com/Download" target="_blank">üëâ ¬† Download VS Code</a></p>
</blockquote>
<p>The installation of extensions is optional and often a matter of personal work style. Below, I have listed a sample selection of extensions.</p>
<h3 id="-8"><a class="header" href="#-8"></a></h3>
<h3 id="flutter-extension"><a class="header" href="#flutter-extension">Flutter Extension</a></h3>
<p>I recommend to install the <em>Flutter</em> Extension for VS Code. Read the section &quot;Install the Flutter and Dart plugins&quot; and follow the instructions:</p>
<p><a href="https://docs.flutter.dev/get-started/editor?tab=vscode" target="_blank">üëâ ¬† Set up an editor - Install the Flutter and Dart plugins</a></p>
<p>Additionally I have installed the <em>Awesome Flutter Snippets</em> extension:</p>
<figure style="margin:0;"><img src="fundamentals/ide-visual-studio-code/../../assets/awesome_flutter_snippets.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Extension <i>Awesome Flutter Snippets</i></p></figcaption></figure>
<h3 id="-9"><a class="header" href="#-9"></a></h3>
<h3 id="rust-extension"><a class="header" href="#rust-extension">Rust Extension</a></h3>
<p>I am also using the <em>rust-analyzer</em> Extension for VS Code. Read the section &quot;Install the rust-analyzer extension&quot; and follow the instructions:</p>
<p><a href="https://code.visualstudio.com/docs/languages/rust" target="_blank">üëâ ¬† Rust in Visual Studio Code</a></p>
<h3 id="others"><a class="header" href="#others">Others</a></h3>
<p>The <em>Material Icon Theme</em> extension provides pretty icons. It's up to you...</p>
<figure style="margin:0;"><img src="fundamentals/ide-visual-studio-code/../../assets/material_icon_extension.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Extension <i>Material Icon Theme</i></p></figcaption></figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-how-everything-works-together"><a class="header" href="#-how-everything-works-together">üí° How everything works together</a></h1>
<hr />
<p>The Big Picture</p>
<hr />
<p>In this next section, I'll provide an overview of the workflow involved in integrating Flutter, Rust, and IOTA. This will give you a better understanding of what a developer needs to do in order to successfully connect these technologies and create an app using the Flutter-Rust-Bridge.</p>
<iframe 
    class="video"  
    src="https://www.youtube.com/embed/P0Kh0DSaddA" 
    title="YouTube video player" 
    frameborder="0" 
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
    allowfullscreen>
</iframe>
<h2 id="understanding-the-workflow"><a class="header" href="#understanding-the-workflow">Understanding the Workflow</a></h2>
<p>Take a simple example: An app with just a button and a text field. When the user clicks the button, it should establish a connection to a Shimmer node and retrieve information about it. This information will then be displayed in the text field.</p>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.001.png" alt="Example 1"><figcaption style="font-size: 0.8em;text-align:center;"><p>Example: User gets node info on button click</p></figcaption></figure>
<h3 id="app-processes"><a class="header" href="#app-processes">App Processes</a></h3>
<p>Within the application itself, the following occurs: in the frontend, when the button is clicked, it triggers its handler. This handler utilizes a method provided by the Foreign Function Interface (FFI). FFI is a mechanism that enables programming languages to call functions from libraries written in a different language. In the context of Flutter and Rust, FFI facilitates communication between the Flutter frontend and the Rust backend. Essentially, the button handler invokes a Rust method. This method then forwards the request to a function in the IOTA Rust library, which retrieves the desired information from the node. The information is then relayed back using the same pathway.</p>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.002.png" alt="Sequence Diagram"><figcaption style="font-size: 0.8em;text-align:center;"><p>Sequence Diagram</p></figcaption></figure>
<h3 id="various-stages"><a class="header" href="#various-stages">Various Stages</a></h3>
<p>During the <strong>Development Phase</strong> (see above), this means that the UI and handlers are written in the Dart programming language, while the backend functions are implemented in Rust. This separation allows for leveraging the strengths of both languages: Dart for the frontend user interface and interactivity, and Rust for robust backend functionality and integration with libraries like IOTA.</p>
<p>During the <strong>Build Phase</strong> (see above), the Rust code is compiled into a library that is then incorporated into the Flutter app. The entire codebase is compiled into machine code that can be executed on the target platform. This process ensures that the Rust functionality seamlessly integrates with the Flutter app, allowing for efficient and effective execution on the desired platform.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="workflow"><a class="header" href="#workflow">Workflow</a></h1>
<hr />
<p>A step-by-step guide</p>
<hr />
<p>The workflow is identical to the one demonstrated in the video. I will also provide the commands used in the video for reference. Please keep in mind that this is only a high-level overview for now. More detailed explanations will be provided later on.</p>
<blockquote>
<p>‚ö†Ô∏è If you genuinely want to practically code the described steps outlined below, I assume that you have completed the setup of your workplace and all tools, as described in the &quot;Fundamentals&quot; section.</p>
</blockquote>
<h2 id="1-check-the-setup"><a class="header" href="#1-check-the-setup">1. Check the Setup</a></h2>
<pre><code>flutter doctor
</code></pre>
<pre><code>rustup show
</code></pre>
<blockquote>
<p>Before you go on, be sure that possible errors are fixed.</p>
</blockquote>
<h2 id="2-initialization-steps"><a class="header" href="#2-initialization-steps">2. Initialization Steps</a></h2>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.003.png" alt="Create Flutter Project"><figcaption style="font-size: 0.8em;text-align:center;"><p>Create Flutter Project</p></figcaption></figure>
<p>In the first step, the following command sets up a new Flutter project with the necessary file structure and dependencies, ready for you to start developing your app. It creates a directory with the specified project name and populates it with the required Flutter files and folders. Now you're all set to unleash your creativity and build amazing Flutter applications!</p>
<pre><code>flutter create --empty example1
</code></pre>
<hr />
<h4 id="-10"><a class="header" href="#-10">¬†</a></h4>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.004.png" alt="Create Rust Library Project Project"><figcaption style="font-size: 0.8em;text-align:center;"><p>Create Rust Library Project Project</p></figcaption></figure>
<p>This includes the required structure for the Rust code and any additional resources or dependencies needed for the backend implementation:</p>
<pre><code>cargo new --lib rust
</code></pre>
<hr />
<h4 id="-11"><a class="header" href="#-11">¬†</a></h4>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.005.png" alt="Setup the Flutter Rust Bridge"><figcaption style="font-size: 0.8em;text-align:center;"><p>Setup the Flutter Rust Bridge</p></figcaption></figure>
<pre><code>cargo install flutter_rust_bridge_codegen

flutter pub add --dev ffigen &amp;&amp; flutter pub add ffi

flutter pub add flutter_rust_bridge

flutter pub add -d build_runner

flutter pub add -d freezed

flutter pub add freezed_annotation
</code></pre>
<pre><code>cargo install cargo-ndk
</code></pre>
<p>In <em>Cargo.toml</em>:</p>
<pre><code>[dependencies]
flutter_rust_bridge = &quot;1&quot;

[lib]
crate-type = [&quot;staticlib&quot;, &quot;cdylib&quot;]
</code></pre>
<p>In <em>android/app/build.gradle</em>, fix error:</p>
<pre><code>Replace GradleException by FileNotFoundException
</code></pre>
<p>In <em>android/app/build.gradle</em>, add at the bottom:</p>
<pre><code>[
        Debug: null,
        Profile: '--release',
        Release: '--release'
].each {
    def taskPostfix = it.key
    def profileMode = it.value
    tasks.whenTaskAdded { task -&gt;
        if (task.name == &quot;javaPreCompile$taskPostfix&quot;) {
            task.dependsOn &quot;cargoBuild$taskPostfix&quot;
        }
    }
    tasks.register(&quot;cargoBuild$taskPostfix&quot;, Exec) {
        workingDir &quot;../../rust&quot;  // &lt;-- ATTENTION: CHECK THE CORRECT FOLDER!!!
        environment ANDROID_NDK_HOME: &quot;$ANDROID_NDK&quot;
        commandLine 'cargo', 'ndk',
                '-t', 'arm64-v8a',
               '-o', '../android/app/src/main/jniLibs', 'build'
        if (profileMode != null) {
            args profileMode
        }
    }
}
</code></pre>
<p>Your Android Virtual Device should be compatible to &quot;arm64-v8a&quot;. &quot;arm64-v8a&quot; is an architecture designation for Android devices. It refers to the 64-bit version of the ARM architecture commonly used in modern Android devices.</p>
<p>The term &quot;arm64&quot; represents the 64-bit version of the ARM architecture, while &quot;v8a&quot; indicates the ABI (Application Binary Interface) associated with that architecture. Thus, the combination of &quot;arm64&quot; and &quot;v8a&quot; refers to the 64-bit ARM architecture running on devices with that ABI.</p>
<h2 id="3-development-steps"><a class="header" href="#3-development-steps">3. Development Steps</a></h2>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.006.png" alt="Start coding the frontend"><figcaption style="font-size: 0.8em;text-align:center;"><p>Start coding the fronend</p></figcaption></figure>
<p>Add a Flutter package that beautifies JSON outputs:</p>
<pre><code>flutter pub add flutter_json_viewer
</code></pre>
<p>Write this content into <em>main.dart</em>:</p>
<pre><code>import 'package:flutter/material.dart';
import 'package:flutter_json_viewer/flutter_json_viewer.dart';
import 'dart:convert';
//import 'ffi.dart‚Äò;

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter - Rust - IOTA',
      theme: ThemeData(
        primarySwatch: Colors.green,
      ),
      home: const MyHomePage(title: 'Get Node Info'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({Key? key, required this.title}) : super(key: key);

  final String title;

  @override
  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();
}

class _MyHomePageState extends State&lt;MyHomePage&gt; {

  String? _ffiNodeInfo;

  @override
  void initState() {
    super.initState();
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(
        title: Text(widget.title),
      ),
      body: ListView(
        children: [
          Container(height: 16),
          Container(
            padding: const EdgeInsets.symmetric(horizontal: 24),
            child: Card(
              child: Container(
                padding:
                    const EdgeInsets.symmetric(horizontal: 24, vertical: 16),
                child: Column(
                  children: [
                    const Text('Result Pane',
                        style: TextStyle(
                            fontSize: 18, fontWeight: FontWeight.bold)),
                    Container(height: 8),
                    const Divider(height: 1.0, thickness: 1.0),
                    Container(height: 24),
                    JsonViewer(json.decode(_ffiNodeInfo ?? &quot;{}&quot;)),
                    //JsonViewer(testArray),
                    Container(height: 24),
                    const Divider(height: 1.0, thickness: 1.0),
                    Container(height: 12),
                    ElevatedButton(
                      onPressed: _callFfiGetNodeInfo,
                      child: const Icon(Icons.play_arrow),
                    ),
                  ],
                ),
              ),
            ),
          ),
        ],
      ),
    );
  }

  Future&lt;void&gt; _callFfiGetNodeInfo() async {
    const receivedText = '{&quot;name&quot;: &quot;HORNET&quot;,&quot;version&quot;: &quot;2.0.0-rc.5&quot;}';
    //final receivedText = await api.getNodeInfo();
    if (mounted) setState(() =&gt; _ffiNodeInfo = receivedText);
  }
}
</code></pre>
<p>The backend call _callFfiGetNodeInfo() is mocked, meaning that instead of making a real request to the server, a simulated response is generated. This approach allows us to emulate the behavior of the backend without actually relying on a live server. By mocking the backend call, we can focus on testing and developing the frontend functionality independently, ensuring that the app's features and user interactions are working as intended.</p>
<blockquote>
<p><strong>Important</strong>: Before starting the application, make sure that your Virtual Android Device is running.</p>
</blockquote>
<p>You can start the application with the command:</p>
<pre><code>flutter run
</code></pre>
<hr />
<h4 id="-12"><a class="header" href="#-12">¬†</a></h4>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.007.png" alt="Generate the Dart Interface Code (FFI)"><figcaption style="font-size: 0.8em;text-align:center;"><p>Generate the Dart Interface Code (FFI)</p></figcaption></figure>
<p>The first step on the Rust side is to include the iota-client library and other necessary resources.</p>
<p>In <em>Cargo.toml</em> add:</p>
<pre><code>[dependencies]
iota-client = { version = &quot;2.0.1-rc.7&quot;, default-features = false, features = [ &quot;tls&quot; ] }

serde_json = { version = &quot;1.0.89&quot;, default-features = false }
anyhow = &quot;1.0.66&quot;
tokio = { version = &quot;1.21.2&quot;, default-features = false, features = [&quot;macros&quot;] }
</code></pre>
<p>Create the file <em>api.rs</em>. <strong>The file <em>api.rs</em> is YOUR RUST WORKING FILE</strong>. The Flutter-Rust-Bridge code generator will identify all public functions within the <code>api.rs</code> file and generate the corresponding Dart Interface from these methods. This means that all public functions available in the Rust code will be exposed and accessible for utilization within the Flutter app.</p>
<p>By automatically generating the Dart Interface, the Flutter-Rust-Bridge simplifies the process of bridging the communication between the Flutter frontend and the Rust backend, enabling seamless interaction and integration between the two languages.</p>
<p>Add this content to <em>api.rs</em>:</p>
<pre><code>use iota_client::Client;
use anyhow::Result;
use tokio::runtime::Runtime;

pub fn get_node_info() -&gt; Result&lt;String&gt; {
    let rt = Runtime::new().unwrap();
    rt.block_on(async {
        let node_url = &quot;https://api.testnet.shimmer.network&quot;;

        // Create a client with that node.
        let client = Client::builder()
            .with_node(&amp;node_url)?
            .with_ignore_node_health()
            .finish()?;

        // Get node info.
        let info = client.get_info().await?;

        Ok(serde_json::to_string_pretty(&amp;info).unwrap())
    })
}
</code></pre>
<p>Replace the content in <em>lib.rs</em> by:</p>
<pre><code>mod api;
</code></pre>
<hr />
<h4 id="-13"><a class="header" href="#-13">¬†</a></h4>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.008.png" alt="Integrate the backend"><figcaption style="font-size: 0.8em;text-align:center;"><p>Integrate the backend</p></figcaption></figure>
<p>This one is easy! It's one of the tasks you need to do whenever the Rust API has changed (e.g. after changing method signatures or add/removing methods). In our example, generate the Dart Interface by executing this command:</p>
<pre><code>flutter_rust_bridge_codegen --rust-input rust/src/api.rs --dart-output ./lib/bridge_generated.dart --dart-decl-output ./lib/bridge_definitions.dart
</code></pre>
<hr />
<h4 id="-14"><a class="header" href="#-14">¬†</a></h4>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.009.png" alt="Integrate the Dart Interface into your frontend code"><figcaption style="font-size: 0.8em;text-align:center;"><p>Integrate the Dart Interface into your frontend code</p></figcaption></figure>
<p>Next to <em>main.dart</em>, add a new file called <em>ffi.dart</em> and add this content:</p>
<pre><code>// This file initializes the dynamic library and connects it with the stub
// generated by flutter_rust_bridge_codegen.

import 'dart:ffi';

import 'bridge_generated.dart';
import 'bridge_definitions.dart';
export 'bridge_definitions.dart';

// Re-export the bridge so it is only necessary to import this file.
export 'bridge_generated.dart';
import 'dart:io' as io;

const _base = 'rust';

// On MacOS, the dynamic library is not bundled with the binary,
// but rather directly **linked** against the binary.
final _dylib = io.Platform.isWindows ? '$_base.dll' : 'lib$_base.so';

final Rust api = RustImpl(io.Platform.isIOS || io.Platform.isMacOS
    ? DynamicLibrary.executable()
    : DynamicLibrary.open(_dylib));

</code></pre>
<p>Integrating the library involves loading it into our project, enabling us to execute its methods and utilize its functionalities.</p>
<p>Now, in <em>main.dart</em>, comment out line 3:</p>
<pre><code>ffi.dart  // remove the two slashs
</code></pre>
<p>The final step is to insert the appropriate function calls to invoke the desired methods from the library. In <em>main.dart</em>, update the function _callFfiGetNodeInfo().</p>
<p>Replace:</p>
<pre><code>    const receivedText = '{&quot;name&quot;: &quot;HORNET&quot;,&quot;version&quot;: &quot;2.0.0-rc.5&quot;}';
    //final receivedText = await api.getNodeInfo();
</code></pre>
<p>by:</p>
<pre><code>    //const receivedText = '{&quot;name&quot;: &quot;HORNET&quot;,&quot;version&quot;: &quot;2.0.0-rc.5&quot;}';
    final receivedText = await api.getNodeInfo();
</code></pre>
<h2 id="4-build-and-run-step"><a class="header" href="#4-build-and-run-step">4. Build and Run Step</a></h2>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.010.png" alt="Build and Run a target"><figcaption style="font-size: 0.8em;text-align:center;"><p>Build and Run a target</p></figcaption></figure>
<blockquote>
<p><strong>Important</strong>: Before starting the application, make sure that your Virtual Android Device is running.</p>
</blockquote>
<p>Open the App with the command:</p>
<pre><code>flutter run
</code></pre>
<p>To inform Flutter about the target platform for which it should build with <em>flutter run</em>, the corresponding platform is initiated beforehand.</p>
<p>During the build process, the Rust code is cross-compiled into a library specific to the target platform (here: arm64-v8a). This compiled library is then automatically copied into the Android project folder.</p>
<p>Then the app is launched.</p>
<h2 id="summary"><a class="header" href="#summary">Summary</a></h2>
<p>Here is a brief summary about all steps, in one picture:</p>
<figure style="margin:0;"><img src="overview/how-everything-works-together/../../assets/overview/Overview.011.png" alt="Summary of Workflow"><figcaption style="font-size: 0.8em;text-align:center;"><p>All steps of the workflow</p></figcaption></figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="handling-code-changes"><a class="header" href="#handling-code-changes">Handling Code Changes</a></h1>
<hr />
<p>What to do in various situations when working with Flutter, Rust, and the Flutter-Rust Bridge.</p>
<hr />
<h3 id="if-the-rust-api-changes"><a class="header" href="#if-the-rust-api-changes">If the Rust API changes</a></h3>
<p>If the Rust API changes, such as the addition of a new <code>pub fn</code> function or <code>pub struct</code>, or if parameters in an existing function change, you will need to call the <code>flutter_rust_bridge_codegen</code> function again.</p>
<blockquote>
<p><strong>Note</strong>: Sometimes I've noticed that the state in VS Code doesn't get updated and still shows faulty files, after the code generation. In this case, it helps to close and reload the project window...</p>
</blockquote>
<h3 id="if-the-business-logic-in-rust-changes"><a class="header" href="#if-the-business-logic-in-rust-changes">If the business logic in Rust changes</a></h3>
<p>If the business logic in Rust changes and the server is currently running, you'll need to stop and restart it. During the startup process, the library will be recompiled automatically with <code>cargo build</code> and linked to the app. You will observe in the console that the library named <code>rust</code> is being compiled.</p>
<h3 id="if-there-are-changes-in-flutter-uibusiness-logic"><a class="header" href="#if-there-are-changes-in-flutter-uibusiness-logic">If there are changes in Flutter UI/business logic</a></h3>
<p>If there are changes in Flutter UI/business logic, you may not have to do anything if the server is running (hot reload is triggered by saving), or you may need to reload the app if necessary. Exception: if you started the app by <code>flutter run</code>, you'd need to use the keyboard, e.g. &quot;r&quot; for hot reload and &quot;R&quot; for reload.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-cross-compiling"><a class="header" href="#-cross-compiling">üè≠ Cross-Compiling</a></h1>
<hr />
<p>Exploring the required Targets.</p>
<hr />
<p>The Rust compiler functions as a cross-compiler by default. It allows us to translate our Rust code into the target platform and package it as a library. However, to enable this functionality, we need to ensure that all the required targets are installed on the host computer. In this chapter, we will delve into the relevant targets for <em>IOTA for Flutter</em>.</p>
<p><a href="https://doc.rust-lang.org/rustc/targets/index.html" target="_blank">üëâ ¬† Rust Targets</a></p>
<h2 id="about-targets"><a class="header" href="#about-targets">About Targets</a></h2>
<p>In the context of software development, a &quot;target&quot; typically refers to the platform or environment for which software is being developed or compiled. The Components of a target specification can vary depending on the context and tooling being used.</p>
<ol>
<li>
<p><strong>Architecture</strong>: The target architecture specifies the instruction set and hardware architecture for which the software is being compiled or built. Examples include x86, x86_64, ARMv7, ARMv8, etc.</p>
</li>
<li>
<p><strong>Vendor</strong>: The vendor component indicates the company or organization associated with the target platform. It helps identify the specific platform or ecosystem for which the software is intended. Examples include apple, android, linux, windows, etc.</p>
</li>
<li>
<p><strong>Operating System</strong>: The operating system component represents the software layer that manages system resources and provides services to applications. It defines the environment in which the software will run. Examples include darwin (macOS, iOS), linux, windows, android, etc.</p>
</li>
<li>
<p><strong>ABI (Application Binary Interface)</strong>: The ABI component defines the interface between the compiled application code and the operating system and hardware. It defines how functions are called, how parameters and return values are passed, how memory is allocated, and other low-level details of interaction between software and the underlying system.</p>
</li>
</ol>
<h3 id="-15"><a class="header" href="#-15"></a></h3>
<h3 id="targets-needed-for-macos-and-ios-development"><a class="header" href="#targets-needed-for-macos-and-ios-development">Targets needed for macOS and iOS Development</a></h3>
<p>The Target Structure typically consists of the following Components:</p>
<pre><code>&lt;Architecture&gt;-&lt;Vendor&gt;-&lt;Operating System&gt;
</code></pre>
<table style="display: flex; justify-content: left;">
<tr><th style="text-align:left;padding:5px 20px;">Target</th><th style="text-align:left;padding:5px 20px;">Meaning</th></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">aarch64-apple-darwin</td>
<td>Targeting Apple devices running macOS with ARM 64-bit architecture (Apple Silicon).</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">x86_64-apple-darwin</td>
<td>Targeting Apple devices running macOS with Intel 64-bit x86 architecture .</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;"></td>
<td></td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">aarch64-apple-ios</td>
<td>Targeting iOS devices with ARM 64-bit architecture, as used since the iPhone 5S and later, the iPad Air, Air 2 and Pro, with the A7 and later chips.</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">armv7s-apple-ios</td>
<td>Targeting iOS devices with 32-bit ARMv7s architecture ("old"), used in A6 and A6X chips on iPhone 5, iPhone 5C and iPad 4.</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">armv7-apple-ios</td>
<td>Targeting iOS devices with 32-bit ARMv7 architecture, used in A5 chip ("old").</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;"></td>
<td></td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">aarch64-apple-ios-sim</td>
<td>Targeting iOS Simulator for Xcode 12 and later on hosts with ARM 64-bit architecture.</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">x86_64-apple-ios-sim</td>
<td>Targeting iOS Simulator for Xcode 12 and later on hosts with 64-bit x86 architecture.</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">i386-apple-ios</td>
<td>Targeting iOS Simulator on hosts with 32-bit x86 architecture ("old").</td></tr>
</table>
<blockquote>
<p><strong>Example</strong>: My workstation computer is a MacBook Air with an M1 chip. Therefore, the following targets are essential for me when developing for macOS and iOS: <em>aarch64-apple-darwin</em> (for macOS), <em>aarch64-apple-ios-sim</em> (simulator for the M1 host environment), and <em>aarch64-apple-ios</em> (for iOS).</p>
</blockquote>
<h3 id="-16"><a class="header" href="#-16"></a></h3>
<h3 id="targets-needed-for-android-development"><a class="header" href="#targets-needed-for-android-development">Targets needed for Android Development</a></h3>
<p>In the context of <em>IOTA for Flutter</em> the Android Native Development Kit (NDK) must be installed. It is used to provide the necessary tools and APIs to interface with the cross-compiled library. The Target Structure then follows the format:</p>
<pre><code>&lt;Architecture&gt;-&lt;Operating_system&gt;-&lt;ABI*&gt;
</code></pre>
<p>ABI* : As part of the Target, the ABI component is different to the correct ABI naming, due to historical reasons or to maintain compatibility. The correct ABI naming is listed in the second column.</p>
<table style="display: flex; justify-content: left;">
<tr><th style="text-align:left;padding:5px 20px;">Target</th><th style="text-align:left;padding:5px 20px;">ABI</th><th style="text-align:left;padding:5px 20px;">Meaning</th></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">aarch64-linux-android</td><td style="white-space:nowrap;vertical-align:top;">arm64-v8a</td>
<td>Targeting Android devices on ARM 64-bit architecture (most modern ARM-based Android devices).</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">armv7-linux-androideabi</td><td style="white-space:nowrap;vertical-align:top;">armeabi-v7a</td>
<td>Targeting Android devices on ARMv7 architecture (older ARM-based Android devices).</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">x86_64-linux-android</td><td style="white-space:nowrap;vertical-align:top;">x86_64</td>
<td>Targeting Android devices on 64-bit x86 architecture (Android emulators, modern x86-based devices).</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">i686-linux-android</td style="white-space:nowrap;vertical-align:top;"><td>x86</td>
<td>Targeting Android devices on 32-bit x86 architecture (Android emulators, older x86-based devices).</td></tr>
</table>
<blockquote>
<p><strong>Example</strong>: My only current Android Virtual Device is a Pixel 3a phone with arm64-v8a system image. Therefore the only interesting target for development is <em>aarch64-linux-android</em>.</p>
</blockquote>
<h3 id="-17"><a class="header" href="#-17"></a></h3>
<h2 id="which-targets-are-installed-on-my-system"><a class="header" href="#which-targets-are-installed-on-my-system">Which targets are installed on my system?</a></h2>
<p>To find out which targets are installed on your system, run the following command:</p>
<p><code>rustc --print target-list</code></p>
<h2 id="how-to-add-missing-targets"><a class="header" href="#how-to-add-missing-targets">How to add missing targets</a></h2>
<p>When you first install a toolchain, rustup installs only the standard library for your host platform - that is, the architecture and operating system you are presently running. To compile to other platforms you must install other target platforms. This is done with the command:</p>
<p><code>rustup target add &lt;target&gt;</code></p>
<p>For example:</p>
<p><code>rustup target add armv7-linux-androideabi</code></p>
<p><a href="https://rust-lang.github.io/rustup/cross-compilation.html" target="_blank">üëâ ¬† The Rustup Book - Cross-compilation</a></p>
<h3 id="-18"><a class="header" href="#-18"></a></h3>
<h2 id="how-to-manually-cross-compile-to-a-target-of-your-choice"><a class="header" href="#how-to-manually-cross-compile-to-a-target-of-your-choice">How to manually cross-compile to a target of your choice</a></h2>
<p>Sometimes, you might need to cross-compile your Rust code to a specific target separately from the Flutter build process. To ensure that everything runs smoothly, make sure you are in the <em>rust</em> folder (on the same level as <em>Cargo.toml</em>).</p>
<h3 id="manually-cross-compile-for-macos-or-ios"><a class="header" href="#manually-cross-compile-for-macos-or-ios">Manually cross-compile for macOS or iOS</a></h3>
<p>On macOS and/or iOS you can start the process by executing this command in the Terminal:</p>
<p><code>cargo build --target &lt;target&gt;</code></p>
<p>For example:</p>
<p><code>cargo build --target aarch64-apple-ios</code></p>
<h3 id="manually-cross-compile-for-android"><a class="header" href="#manually-cross-compile-for-android">Manually cross-compile for Android</a></h3>
<p>On Android you can start the process by executing this command in the Terminal:</p>
<p><code>cargo ndk -t &lt;abi&gt; build</code></p>
<p>For example:</p>
<p><code>cargo ndk -t arm64-v8a build</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-flutter-rust-bridge"><a class="header" href="#-flutter-rust-bridge">üåÅ Flutter Rust Bridge</a></h1>
<hr />
<p>Unifying Flutter and Rust: Harnessing the power of two technologies.</p>
<hr />
<p>On one hand, we have Flutter, a powerful framework for building user interfaces and applications. On the other hand, we have Rust, a high-performance programming language known for its safety and efficiency. But how can we combine these two technologies?</p>
<p>Enter the Flutter Rust Bridge, a GitHub project designed to address this very challenge of integrating both technologies.</p>
<p><a href="https://cjycode.com/flutter_rust_bridge" target="_blank">üëâ ¬† Flutter Rust Bridge - User Guide</a></p>
<p><a href="https://github.com/fzyzcjy/flutter_rust_bridge" target="_blank">üëâ ¬† Flutter Rust Bridge - Github Page</a></p>
<blockquote>
<p>It is important to highlight that, currently, the missing component in this equation is IOTA. However, this tutorial will delve into its integration in the later sections.</p>
</blockquote>
<h2 id="code-generator"><a class="header" href="#code-generator">Code Generator</a></h2>
<p>The Code Generator is a Rust executable that processes Rust code and produces two outputs: a generated module <code>bridge_generated.rs</code> on the Rust side and a Dart file <code>bridge_generated.dart</code> with definitions and implementations on the Dart side. The two files act as a bridge between the two programming languages.</p>
<blockquote>
<p>The Code Generator offers a range of options that you can access by using this terminal command:</p>
<p><code>flutter_rust_bridge_codegen --help</code></p>
</blockquote>
<p>This command provides you with a list of available options and their respective descriptions, allowing you to customize the code generation process according to your specific needs.</p>
<p>In the <a href="overview/flutter-rust-bridge/../how-everything-works-together/workflow.html">Workflow</a> section documenting an <strong>Android</strong> demo, I used these options:</p>
<pre><code>flutter_rust_bridge_codegen \
--rust-input rust/src/api.rs \                      // Source file
--dart-output ./lib/bridge_generated.dart \         // Output in Dart folder
--dart-decl-output ./lib/bridge_definitions.dart    // Seperate definition file in Dart folder
</code></pre>
<p>When working on code for <strong>iOS</strong>, you will require the following options for the Code Generator:</p>
<pre><code>flutter_rust_bridge_codegen \
--rust-input rust/src/api.rs \                      // Source file
--dart-output ./lib/bridge_generated.dart \         // Output in Dart folder
--dart-decl-output ./lib/bridge_definitions.dart \  // Seperate definition file in Dart folder
--c-output ios/Runner/bridge_generated.h            // Generate a C header in the correct iOS folder
</code></pre>
<p>Similar for <strong>macOS</strong>:</p>
<pre><code>flutter_rust_bridge_codegen \
--rust-input rust/src/api.rs \                      // Source file
--dart-output ./lib/bridge_generated.dart \         // Output in Dart folder
--dart-decl-output ./lib/bridge_definitions.dart \  // Seperate definition file in Dart folder
--c-output macos/Runner/bridge_generated.h          // Generate a C header in the correct macOS folder
</code></pre>
<hr />
<blockquote>
<p><strong>A task for you</strong></p>
<p>For other target platforms such as Browser, Linux, and Windows, please refer to the User Guide for specific instructions on using the Code Generator. Additionally, you have the option to create a YAML config file and utilize the command <code>flutter_run_bridge_codegen [CONFIG_FILE]</code> to streamline the code generation process. I encourage you to give it a try and explore the flexibility and convenience it offers.</p>
</blockquote>
<div style="break-before: page; page-break-before: always;"></div><h1 id="about"><a class="header" href="#about">About</a></h1>
<hr />
<p>Bridging the gap: The power of <em>Flutter Rust Bridge</em></p>
<hr />
<p>The <em>Flutter Rust Bridge</em> serves as the foundation for the &quot;IOTA for Flutter&quot; project. I was glad to have found this solution for the glueing task, with extensive documentation. There may be other alternatives out there, but I didn't look further because the <em>Flutter Rust Bridge</em> met my needs. The scope and features are so vast that I haven't even explored them all myself.</p>
<h3 id="-19"><a class="header" href="#-19"></a></h3>
<figure style="margin:0;"><img src="overview/flutter-rust-bridge/../../assets/frb.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>User Guide of the Flutter Rust Bridge</p></figcaption></figure>
<p>One of the selection criteria was the project's open-source nature and the fact that it is an active project. From my impression, regular updates ensure that the <em>Flutter Rust Bridge</em> stays up to date.</p>
<p>Additionally, it was important to me that I found support when I had questions. I received friendly and helpful answers, which was reassuring. It's great to know that there are dedicated individuals willing to help and facilitate the development process.</p>
<p>For developers embarking on the <em>IOTA for Flutter</em> journey, the GitHub page of the <em>Flutter Rust Bridge</em> is a valuable resource. Whether you have questions or can support others with your knowledge, it's a place to turn to.</p>
<blockquote>
<p><strong>How does <em>IOTA for Flutter</em> differ from <em>Flutter Rust Bridge</em>?</strong></p>
<p>While the workflow of <em>IOTA for Flutter</em> utilizes the <em>Flutter Rust Bridge</em> as its foundation, it offers distinct advantages through its context-specific content centered around Shimmer and IOTA. The focus of <em>IOTA for Flutter</em> is to enhance the application and installation process, which has sometimes proven to be challenging. By addressing these difficulties, <em>IOTA for Flutter</em> aims to provide a smoother and more user-friendly experience.</p>
</blockquote>
<p>What further convinced me is the power of the project itself: the <em>Flutter Rust Bridge</em> is packed with features! It's like a treasure chest waiting to be explored. I haven't discovered all its possibilities yet, and that's something for you to explore as well.</p>
<p>For example, <em>IOTA for Flutter</em> has not yet utilized the capability to create multiple API files, to run Flutter Unit tests or the integration of the command runner just, which could potentially optimize the workflow, among other things.</p>
<p>All in all, the <em>Flutter Rust Bridge</em> has become the indispensable tool for this project. I'm grateful to have found a solution that perfectly fits our needs and simplifies the development process.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="language-translations"><a class="header" href="#language-translations">Language translations</a></h1>
<hr />
<p>Exploring the possibilities and limitations of integrating Dart and Rust.</p>
<hr />
<p>The user guide devotes a large portion of Rust code vs. Dart code comparisons to highlight the possibilities and limitations of using the Flutter Rust Bridge. It is highly recommended to consult the user guide when starting to write your own code in <code>api.rs</code>:</p>
<p><a href="https://cjycode.com/flutter_rust_bridge/feature/lang.html" target="_blank">üëâ ¬† Flutter Rust Bridge - User Guide - Features - Language translations</a></p>
<p>In addition to these chapters in the user guide, the <em>frb example</em> folder in the GitHub repository serves as a valuable resource. It contains two files: one with Dart code with numerous examples, and another with corresponding Rust code demonstrating the same examples. This resource provides practical illustrations of how integration between Rust and Dart can be implemented and provides insight and inspiration for your own development projects.</p>
<table style="display: flex; justify-content: left;">
<tr><th style="text-align:left;padding:5px 20px;">Compare that</th><th style="text-align:left;padding:5px 20px;">to that</th></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">
<a href="https://github.com/fzyzcjy/flutter_rust_bridge/blob/master/frb_example/pure_dart/dart/lib/main.dart" target="_blank">üëâ &nbsp; Dart code examples</a>
</td><td style="white-space:nowrap;vertical-align:top;">
<a href="https://github.com/fzyzcjy/flutter_rust_bridge/blob/master/frb_example/pure_dart/rust/src/api.rs" target="_blank">üëâ &nbsp; Rust code examples</a>
</td>
</tr>
</table>
<div style="break-before: page; page-break-before: always;"></div><h1 id="-iota-libraries"><a class="header" href="#-iota-libraries">üìö IOTA libraries</a></h1>
<hr />
<p>Will be completed in Milestone 2 and 3.</p>
<hr />
<ul>
<li>IOTA's Rust libraries</li>
<li>Chrysalis and Stardust - library versions</li>
<li>Cargo.lock: How to find out versions of dependencies</li>
<li>How to mix IOTA libraries</li>
<li>How to use GitHub references</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flutter-only"><a class="header" href="#flutter-only">Flutter only</a></h1>
<hr />
<p>Getting a bit familiar with Flutter Development in Visual Studio Code.</p>
<hr />
<h2 id="flutter-standard-app"><a class="header" href="#flutter-standard-app">Flutter Standard App</a></h2>
<p>The purpose of this section is to get familiar with Flutter and how to work with it in Visual Studio Code. The <em>Flutter Default App</em> is a small app that consists of only one file (main.dart). This app can be generated quickly, allowing you to practice how to launch the app on different target platforms using Visual Studio.</p>
<h3 id="create-the-flutter-standard-app-in-your-terminal-app"><a class="header" href="#create-the-flutter-standard-app-in-your-terminal-app">Create the <em>Flutter Standard App</em> in your Terminal App</a></h3>
<pre><code>flutter create &lt;flutter_project_name&gt;
</code></pre>
<p>Executing this command will generate a new folder in the current directory that includes all necessary files and subfolders for a Flutter project. The default application is a Counter App, featuring a screen with a number that can be incremented by tapping on a Floating Action Button.</p>
<figure style="margin:0;"><img src="building-without-iota/../assets/launchapp/flutter_default_app.jpg" alt="Flutter Default App"><figcaption style="font-size: 0.8em;text-align:center;"><p>Flutter Default App</p></figcaption></figure>
<h3 id="open-the-app-in-visual-studio-code"><a class="header" href="#open-the-app-in-visual-studio-code">Open the app in Visual Studio code</a></h3>
<p>a) Switch into the subfolder <em>flutter_project_name</em></p>
<pre><code>cd &lt;flutter_project_name&gt;
</code></pre>
<p>b) Open VS Code by</p>
<pre><code>code .
</code></pre>
<blockquote>
<p>On Windows, the command <code>code .</code> should work out of the box.</p>
<p>If not working on Mac, you need to install the 'code' command once:
Open up VS Code, go to View -&gt; Command Palette (or use the shortcut, see <em>Keyboard Shortcuts</em> below), type 'shell' and search for
<em>Shell Command: Install 'code' command in PATH</em>. Click on it and it will install in seconds.</p>
</blockquote>
<h3 id="launch-the-app-in-different-ways"><a class="header" href="#launch-the-app-in-different-ways">Launch the App in different ways</a></h3>
<p>Once Visual Studio Code is open you can launch the app in different ways.</p>
<p>a) By using <code>flutter run</code> command:</p>
<p>Open the Terminal in VS Code (see Shortcut below) and type in <code>flutter run</code>. If there are several targets, the execution is paused and you need to select the target:</p>
<figure style="margin:0;"><img src="building-without-iota/../assets/flutter_run.jpg" alt="Launch app"><figcaption style="font-size: 0.8em;text-align:center;"><p>Launching app by <i>flutter run</i></p></figcaption></figure>
<p>b) By selecting the Target Platform first, and then by using one of several starting options <strong>(ensure that the <em>main.dart</em> file is open)</strong>:</p>
<figure style="margin:0;"><img src="building-without-iota/../assets/launchapp/launch1.jpg" alt="Current Target platform"><figcaption style="font-size: 0.8em;text-align:center;"><p>Current Target Platform - click to select another one</p></figcaption></figure>
<figure style="margin:0;"><img src="building-without-iota/../assets/launchapp/launch2.jpg" alt="Select Target platform"><figcaption style="font-size: 0.8em;text-align:center;"><p>Start and/or select a Target Platform</p></figcaption></figure>
<figure style="margin:0;"><img src="building-without-iota/../assets/launchapp/launch3.jpg" alt="Launch options"><figcaption style="font-size: 0.8em;text-align:center;"><p>Launch Options</p></figcaption></figure>
<figure style="margin:0;"><img src="building-without-iota/../assets/launchapp/launch4.jpg" alt="Control Panel"><figcaption style="font-size: 0.8em;text-align:center;"><p>Control Panel</p></figcaption></figure>
<p>When you launch the app using this method, any code changes you make will trigger a hot reload automatically. If you were to use &quot;flutter run&quot;, you would need to manually press the &quot;r&quot; key to initiate a hot reload of the app.</p>
<h2 id="keyboard-shortcuts-visual-studio-code"><a class="header" href="#keyboard-shortcuts-visual-studio-code">Keyboard Shortcuts (Visual Studio Code)</a></h2>
<p>I find these ones especially practical in my daily use of VS Code to boost my productivity:</p>
<table style="display: flex; justify-content: left;">
<tr><th style="text-align:left;padding:5px 20px;">Function</th><th style="text-align:left;padding:5px 20px;">Windows</th><th style="text-align:left;padding:5px 20px;">Mac</th><th>Usage</th></th></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">Open Files quickly</td><td style="white-space:nowrap;vertical-align:top;">Ctrl + P</td>
<td style="white-space:nowrap;vertical-align:top;">Command + P</td><td style="vertical-align:top;">Use the shortcut and start typing the name of the file...</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">Toggle left Sidebar</td><td style="white-space:nowrap;vertical-align:top;">Ctrl + B</td>
<td style="white-space:nowrap;vertical-align:top;">Command + B</td><td></td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">Toggle Terminal</td><td style="white-space:nowrap;vertical-align:top;">Ctrl + J</td>
<td style="white-space:nowrap;vertical-align:top;">Command + J</td><td></td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">Multi-Select Cursor</td><td style="white-space:nowrap;vertical-align:top;">Ctrl + D</td>
<td style="white-space:nowrap;vertical-align:top;">Command + D</td><td style="vertical-align:top;">When you need to change all occurences of a function or tag in a file, select one. Then use the short cut to select all and make your changes.</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">Copy Line</td><td style="white-space:nowrap;vertical-align:top;">Shift + Alt + Up <br> Shift + Alt + Down</td>
<td style="white-space:nowrap;vertical-align:top;">Option + Shift + Up <br> Option + Shift + Down</td><td style="vertical-align:top;">Click in one line and use the shortcut.</td></tr>
<tr><td style="white-space:nowrap;vertical-align:top;">Open Command Palette</td><td style="white-space:nowrap;vertical-align:top;">Ctrl + Shift + P</td>
<td style="white-space:nowrap;vertical-align:top;">Command + Shift + P</td><td style="vertical-align:top;">Use the shortcut and start typing the command...</td></tr>
</table>
<h3 id="-20"><a class="header" href="#-20"></a></h3>
<h2 id="flutter-tutorial-for-beginners-in-1-hour"><a class="header" href="#flutter-tutorial-for-beginners-in-1-hour">Flutter Tutorial For Beginners In 1 Hour</a></h2>
<p>When I first started exploring Flutter, I found this video to be particularly valuable. In addition to learning about the interplay of widgets and arguments, the tips on practical handling in VS Code were also very helpful to me.</p>
<p><a href="https://www.youtube.com/watch?v=C-fKAzdTrLU" target="_blank">üëâ ¬† Flutter Tutorial For Beginners In 1 Hour</a></p>
<h2 id="codelab-from-google"><a class="header" href="#codelab-from-google">Codelab from Google</a></h2>
<p>As the creator of Flutter and Dart, Google has some excellent resources to make it easy for beginners to get started with Flutter. Here is a codelab that guides developers through the steps, which they can follow in their IDE. Simply click on the button <em>Start codelab</em>.</p>
<p><a href="https://docs.flutter.dev/get-started/codelab" target="_blank">üëâ ¬† A Codelab to write your first app</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flutter-and-rust"><a class="header" href="#flutter-and-rust">Flutter and Rust</a></h1>
<hr />
<p>Unstoppable: The Power of Flutter, Rust, and FRB - Flutter Rust Bridge</p>
<hr />
<p>The sun beat down mercilessly on the dusty parking lot. In the distance, the faint hum of a fan could be heard. Suddenly, two figures emerged from the shadows. One wore a colorful hat and a fluttering cape, the other a sturdy leather jacket and casually tossed a yo-yo.</p>
<p>Flutter and Rust stared deep into each other's eyes, as if they could read each other's thoughts. Suddenly, Flutter broke the silence and said, &quot;I think we could achieve even more if we work together. Your strengths complement my weaknesses and vice versa.&quot;</p>
<p>Rust pondered for a moment before replying, &quot;I agree. But how do we do it? How can we combine our powers?&quot;</p>
<p>Flutter grinned and pulled out his phone. &quot;I have an idea,&quot; he said, opening up the Flutter framework. &quot;Let's develop an app that combines the best of both worlds. Speed and flexibility from me, and security and robustness from you.&quot;</p>
<p>Rust nodded in agreement. &quot;But we'll need FRB to make it happen,&quot; he said. Flutter smiled. &quot;Of course. With FRB, we're unbeatable.&quot;</p>
<p>With the super power of FRB, Flutter and Rust worked tirelessly to develop the perfect app. And when they finally launched it, the response was overwhelming. Users raved about its speed, security, and functionality.</p>
<p>As they basked in the success of their app, Flutter and Rust couldn't help but wonder, &quot;Could we be even more successful? What if we brought in IOTA?&quot;</p>
<p>But for now, they were content with their partnership and the success they had achieved together. Who knows what the future held? All they knew was that they were ready for whatever challenges lay ahead.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="flutter-rust-bridge-frb-template-app"><a class="header" href="#flutter-rust-bridge-frb-template-app">Flutter Rust Bridge (FRB) Template App</a></h1>
<hr />
<p>FRB Template App - Integrating Rust with Flutter.</p>
<hr />
<p>I would like to showcase the <em>Flutter Rust Bridge Template</em> app in this chapter. It's from one of the main contributors of the Flutter Rust Bridge, Viet Dinh.</p>
<p><a href="https://github.com/Desdaemon/flutter_rust_bridge_template" target="_blank">üëâ ¬† Flutter Rust Bridge Template on Github</a></p>
<p>This chapter is intended as an additional exercise to become more acquainted with integrating Rust into a Flutter project, without the added complexity of integrating with IOTA.</p>
<p><strong>Additionally, this chapter will cover the configuration steps for macOS and iOS, and as a consequence, it will introduce a modified workflow.</strong></p>
<p>I will start this project from scratch and only take the necessary code from the FRB repository.</p>
<h3 id="-21"><a class="header" href="#-21"></a></h3>
<h2 id="from-the-straight-forward-to-a-modified-workflow"><a class="header" href="#from-the-straight-forward-to-a-modified-workflow">From the &quot;straight forward&quot; to a &quot;modified&quot; workflow</a></h2>
<p>Remember the workflow used in the introduction chapter <a href="building-without-iota/flutter-and-rust/frb-example-app/../../../overview/how-everything-works-together">How everything works together</a>.</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/overview/Overview.011.png" alt="Summary of Workflow"><figcaption style="font-size: 0.8em;text-align:center;"><p>All steps of the workflow</p></figcaption></figure>
<p>You can simply list all the steps one after the other in a straight forward workflow.</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/chicken_egg/chicken_egg.001.png" alt="Summary of Workflow"><figcaption style="font-size: 0.8em;text-align:center;"><p>Straight forward workflow</p></figcaption></figure>
<p>This works for Android.</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/chicken_egg/chicken_egg.002.png" alt="Android: straight forward workflow"><figcaption style="font-size: 0.8em;text-align:center;"><p>Android: straight forward workflow</p></figcaption></figure>
<p>When working on macOS and iOS, you may encounter a <em>Chicken and Egg</em> problem, which is <strong>not a serious issue</strong> but may result in error messages that we would like to avoid.</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/chicken_egg/chicken_egg.003.png" alt="Straight forward workflow doesn't work for macOS / iOS"><figcaption style="font-size: 0.8em;text-align:center;"><p>Straight forward workflow doesn't work for macOS / iOS</p></figcaption></figure>
<p>The issue at hand is that the setup for FRB requires configuring a C header file that contains a list of all the exported symbols from the Rust library. However, this header file does not yet exist during the setup process. It will only be generated later when the Dart interface is generated.</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/chicken_egg/chicken_egg.004.png" alt="Chicken and egg problem"><figcaption style="font-size: 0.8em;text-align:center;"><p>Chicken and egg problem</p></figcaption></figure>
<p>To resolve this issue, I combine the Initialization and Development steps.</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/chicken_egg/modified_workflow.001.png" alt="Solution"><figcaption style="font-size: 0.8em;text-align:center;"><p>Combination of Initialization and Development steps</p></figcaption></figure>
<p>The Step about <em>Setting up the Flutter Rust Bridge</em> is now separated into two parts.</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/chicken_egg/modified_workflow.002.png" alt="Modified workflow"><figcaption style="font-size: 0.8em;text-align:center;"><p>Modified workflow</p></figcaption></figure>
<p>I will be following the <em>modified workflow</em> in the upcoming subchapters. There are platform specific instructions for setting up the FRB on Android, macOS, and iOS. However, there are also some general steps that apply to all target platforms, which I will cover before and after the specific subchapters.</p>
<p>To create the FRB example app successfully, it's important to follow each subchapter in order, starting from the beginning and moving forward.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="part-1-initialization-and-rust-part"><a class="header" href="#part-1-initialization-and-rust-part">Part 1: Initialization and Rust part</a></h1>
<hr />
<p>FRB Template App: Applying the <strong><a href="building-without-iota/flutter-and-rust/frb-example-app/../frb-example-app">modified Workflow</a></strong>.</p>
<hr />
<h2 id="create-the-flutter-app"><a class="header" href="#create-the-flutter-app">Create the Flutter App</a></h2>
<p>In the Terminal App, create an empty Flutter project - I'll name it <em>example2</em> - and open it in Visual Code:</p>
<pre><code>flutter create --empty example2
</code></pre>
<pre><code>cd example2
</code></pre>
<pre><code>code .
</code></pre>
<h2 id="create-the-rust-library-project"><a class="header" href="#create-the-rust-library-project">Create the Rust Library Project</a></h2>
<p>In VS Code open the terminal and execute:</p>
<pre><code>cargo new --lib rust
</code></pre>
<h2 id="set-up-the-flutter-rust-bridge-1"><a class="header" href="#set-up-the-flutter-rust-bridge-1">Set up the Flutter Rust Bridge (1)</a></h2>
<pre><code>cargo install flutter_rust_bridge_codegen
</code></pre>
<pre><code>flutter pub add --dev ffigen &amp;&amp; flutter pub add ffi
</code></pre>
<pre><code>flutter pub add flutter_rust_bridge
</code></pre>
<pre><code>flutter pub add -d build_runner
</code></pre>
<pre><code>flutter pub add -d freezed
</code></pre>
<pre><code>flutter pub add freezed_annotation
</code></pre>
<p>In <em>Cargo.toml</em> add:</p>
<pre><code>[dependencies]
flutter_rust_bridge = &quot;1&quot;

[lib]
crate-type = [&quot;staticlib&quot;, &quot;cdylib&quot;]
</code></pre>
<h2 id="development-of-the-rust-api-of-the-frb-template-app"><a class="header" href="#development-of-the-rust-api-of-the-frb-template-app">Development of the Rust API of the FRB Template App</a></h2>
<h3 id="app-specific-dependencies"><a class="header" href="#app-specific-dependencies">App specific dependencies</a></h3>
<p>The <code>Cargo.toml</code> should look like (add <em>anyhow</em>):</p>
<pre><code>[dependencies]
anyhow = &quot;1&quot;
flutter_rust_bridge = &quot;1&quot;
</code></pre>
<h3 id="rust-code"><a class="header" href="#rust-code">Rust code</a></h3>
<p>Create the file <code>rust/src/api.rs</code> and add this content:</p>
<pre><code>// This is the entry point of your Rust library.
// When adding new code to your project, note that only items used
// here will be transformed to their Dart equivalents.

// A plain enum without any fields. This is similar to Dart- or C-style enums.
// flutter_rust_bridge is capable of generating code for enums with fields
// (@freezed classes in Dart and tagged unions in C).
pub enum Platform {
    Unknown,
    Android,
    Ios,
    Windows,
    Unix,
    MacIntel,
    MacApple,
    Wasm,
}

// A function definition in Rust. Similar to Dart, the return type must always be named
// and is never inferred.
pub fn platform() -&gt; Platform {
    // This is a macro, a special expression that expands into code. In Rust, all macros
    // end with an exclamation mark and can be invoked with all kinds of brackets (parentheses,
    // brackets and curly braces). However, certain conventions exist, for example the
    // vector macro is almost always invoked as vec![..].
    //
    // The cfg!() macro returns a boolean value based on the current compiler configuration.
    // When attached to expressions (#[cfg(..)] form), they show or hide the expression at compile time.
    // Here, however, they evaluate to runtime values, which may or may not be optimized out
    // by the compiler. A variety of configurations are demonstrated here which cover most of
    // the modern oeprating systems. Try running the Flutter application on different machines
    // and see if it matches your expected OS.
    //
    // Furthermore, in Rust, the last expression in a function is the return value and does
    // not have the trailing semicolon. This entire if-else chain forms a single expression.
    if cfg!(windows) {
        Platform::Windows
    } else if cfg!(target_os = &quot;android&quot;) {
        Platform::Android
    } else if cfg!(target_os = &quot;ios&quot;) {
        Platform::Ios
    } else if cfg!(all(target_os = &quot;macos&quot;, target_arch = &quot;aarch64&quot;)) {
        Platform::MacApple
    } else if cfg!(target_os = &quot;macos&quot;) {
        Platform::MacIntel
    } else if cfg!(target_family = &quot;wasm&quot;) {
        Platform::Wasm
    } else if cfg!(unix) {
        Platform::Unix
    } else {
        Platform::Unknown
    }
}

// The convention for Rust identifiers is the snake_case,
// and they are automatically converted to camelCase on the Dart side.
pub fn rust_release_mode() -&gt; bool {
    cfg!(not(debug_assertions))
}
</code></pre>
<p>Insert this line in <code>lib.rs</code>:</p>
<pre><code>mod api;
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="part-2-android-specific-instructions"><a class="header" href="#part-2-android-specific-instructions">Part 2: Android specific instructions</a></h1>
<hr />
<p>FRB Template App: Applying the <strong><a href="building-without-iota/flutter-and-rust/frb-example-app/../frb-example-app">modified Workflow</a></strong>.</p>
<hr />
<h2 id="android-steps"><a class="header" href="#android-steps">Android steps</a></h2>
<h3 id="generate-the-dart-interface"><a class="header" href="#generate-the-dart-interface">Generate the Dart Interface</a></h3>
<p>Use this command (you need to be in the root of your project):</p>
<pre><code>flutter_rust_bridge_codegen \
--rust-input rust/src/api.rs \
--dart-output ./lib/bridge_generated.dart \
--dart-decl-output ./lib/bridge_definitions.dart \
</code></pre>
<h3 id="set-up-the-flutter-rust-bridge-2"><a class="header" href="#set-up-the-flutter-rust-bridge-2">Set up the Flutter Rust Bridge (2)</a></h3>
<p>To install the <code>cargo-ndk</code> command use:</p>
<pre><code>cargo install cargo-ndk
</code></pre>
<p>In <em>android/app/build.gradle</em>, fix error:</p>
<pre><code>Replace GradleException by FileNotFoundException
</code></pre>
<p>In <em>android/app/build.gradle</em>, add at the bottom:</p>
<pre><code>[
        Debug: null,
        Profile: '--release',
        Release: '--release'
].each {
    def taskPostfix = it.key
    def profileMode = it.value
    tasks.whenTaskAdded { task -&gt;
        if (task.name == &quot;javaPreCompile$taskPostfix&quot;) {
            task.dependsOn &quot;cargoBuild$taskPostfix&quot;
        }
    }
    tasks.register(&quot;cargoBuild$taskPostfix&quot;, Exec) {
        workingDir &quot;../../rust&quot;  // &lt;-- ATTENTION: CHECK THE CORRECT FOLDER!!!
        environment ANDROID_NDK_HOME: &quot;$ANDROID_NDK&quot;
        commandLine 'cargo', 'ndk',
                '-t', 'arm64-v8a',
               '-o', '../android/app/src/main/jniLibs', 'build'
        if (profileMode != null) {
            args profileMode
        }
    }
}
</code></pre>
<p>I only included the ABI <em>arm64-v8a</em> from my Android Emulator.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="part-3-common-macosios-specific-instructions"><a class="header" href="#part-3-common-macosios-specific-instructions">Part 3: Common macOS/iOS specific instructions</a></h1>
<hr />
<p>FRB Template App: Applying the <strong><a href="building-without-iota/flutter-and-rust/frb-example-app/../frb-example-app">modified Workflow</a></strong>.</p>
<hr />
<h2 id="common-macos-and-ios-steps"><a class="header" href="#common-macos-and-ios-steps">Common macOS and iOS steps</a></h2>
<p>An common step for macOS / iOS is needed: creating an Xcode project <strong>inside of the Rust library project folder</strong> (<em>rust/</em>). This can be done using the <code>cargo-xcode</code> command.</p>
<p>This Cargo subcommand is used to generate all Xcode project files for Rust projects. It will also create a <em>build rule</em> that will be used to create a dynamic and a static library from the Rust library code in Xcode's build step. If you don't remember, take a look back and read the section <a href="building-without-iota/flutter-and-rust/frb-example-app/../../fundamentals/xcode/essentials.html">Xcode Essentials</a>.</p>
<p>To install the <code>cargo-xcode</code> command use:</p>
<pre><code>cargo install cargo-xcode
</code></pre>
<p>After the installation of the command, create the Rust Xcode project. Make sure to be in the <em>rust/</em> directory. From the project's root folder you may switch into the right directory:</p>
<pre><code>cd rust
</code></pre>
<pre><code>cargo xcode
</code></pre>
<pre><code>cd ..
</code></pre>
<figure style="margin:0;">
<a href="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/create_rust_xcodeproj_before.jpg" target="_blank">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/create_rust_xcodeproj_before.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Before building the Rust Xcode Project (click to enlarge)</p></figcaption>
</a>
</figure>
<blockquote>
<p>In this picture puzzle, you need to find the differences between two images. First, carefully examine the &quot;before&quot; image above ‚¨ÜÔ∏è - take note of all the details - and then look at the &quot;after&quot; image below ‚¨áÔ∏è and try to identify the differences.</p>
</blockquote>
<figure style="margin:0;">
<a style="width:50%" href="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/create_rust_xcodeproj_after.jpg" target="_blank">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/create_rust_xcodeproj_after.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>After building the Rust Xcode Project (click to enlarge)</p></figcaption>
</a>
</figure>
<h3 id="-22"><a class="header" href="#-22"></a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="part-4-macos-specific-instructions"><a class="header" href="#part-4-macos-specific-instructions">Part 4: macOS specific instructions</a></h1>
<hr />
<p>FRB Template App: Applying the <strong><a href="building-without-iota/flutter-and-rust/frb-example-app/../frb-example-app">modified Workflow</a></strong>.</p>
<hr />
<h2 id="macos-steps"><a class="header" href="#macos-steps">macOS steps</a></h2>
<h3 id="generate-the-dart-interface-1"><a class="header" href="#generate-the-dart-interface-1">Generate the Dart Interface</a></h3>
<p>Our next task is to create the generated code. This will also copy the C header file <code>bridge_generated.h</code> into the folder <em>macos/Runner/</em>. Use this command (you need to be in the root of your project):</p>
<pre><code>flutter_rust_bridge_codegen \
--rust-input rust/src/api.rs \
--dart-output ./lib/bridge_generated.dart \
--dart-decl-output ./lib/bridge_definitions.dart \
--c-output macos/Runner/bridge_generated.h
</code></pre>
<h3 id="create-the-subproject"><a class="header" href="#create-the-subproject">Create the subproject</a></h3>
<p>How is a subproject created in Xcode?</p>
<p>Simply open the <em>macos/Runner.xcodeproj</em> in Xcode, open the <em>rust/</em> directory in Finder and drag the <em>rust.xcodeproj</em> into the Runner folder. The next images will illustrate the steps.</p>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/macos_instructions/macos_1.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Open <i>Runner.xcodeproj</i></p></figcaption>
</figure>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/macos_instructions/macos_2.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Drag the file <i>rust.xcodeproj</i> into the Runner Project</p></figcaption>
</figure>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/macos_instructions/macos_3.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>The new subproject</p></figcaption>
</figure>
<h3 id="adjust-the-runner-targets-build-phases"><a class="header" href="#adjust-the-runner-targets-build-phases">Adjust the Runner Target's <em>Build Phases</em></a></h3>
<p><a href="https://cjycode.com/flutter_rust_bridge/integrate/ios_linking.html" target="_blank">For macOS, FRB recommends to include the dynamic library.</a></p>
<p>a) In Runner Target's <em>Build Phase</em> -&gt; <em>Target Dependencies</em>:</p>
<p>Click on &quot;+&quot; and select <code>rust-cdylib</code>.</p>
<p>b) In Runner Target's <em>Build Phase</em> -&gt; <em>Link Binary with Libraries</em>:</p>
<p>Click on &quot;+&quot; and select <code>rust.dylib</code>.</p>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/macos_instructions/macos_4.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Adjusted <i>Build Phases</i></p></figcaption>
</figure>
<h3 id="adjust-the-runner-targets-build-settings"><a class="header" href="#adjust-the-runner-targets-build-settings">Adjust the Runner Target's <em>Build Settings</em></a></h3>
<p>Start typing &quot;Objective-C Bridging Header&quot; in the filter... the hard-to-find setting is in the <em>Swift Compiler - General</em> section of the settings.</p>
<p>As value, insert:</p>
<pre><code>Runner/bridge_generated.h
</code></pre>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/macos_instructions/macos_5.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Adjusted <i>Build Settings</i></p></figcaption>
</figure>
<h3 id="adjust-minimum-deployments"><a class="header" href="#adjust-minimum-deployments">Adjust <em>Minimum Deployments</em></a></h3>
<p>To ensure that your app can run on your host computer and Xcode version, you may only be able to support newer macOS versions. To set the minimum supported macOS version for your app, go to the <em>General</em> tab and select macOS version <code>13.1</code> as the <em>Minimum Deployments</em> target.</p>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/macos_instructions/macos_6.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Adjusted <i>Minimum Deployment</i></p></figcaption>
</figure>
<h3 id="adjust-the-appdelegateswift-file"><a class="header" href="#adjust-the-appdelegateswift-file">Adjust the <code>AppDelegate.swift</code> file</a></h3>
<p>Switch to Visual Studio Code and open the file <code>macos/Runner/AppDelegate.swift</code>. We need to call the function <em>dummy_method_to_enforce_bundling()</em> (from FRB) somewhere to avoid that Xcode doesn't handle our library as dead code.</p>
<p>Add:</p>
<pre><code>dummy_method_to_enforce_bundling()
</code></pre>
<p>Your file should look like:</p>
<pre><code>import Cocoa
import FlutterMacOS

@NSApplicationMain
class AppDelegate: FlutterAppDelegate {
  override func applicationShouldTerminateAfterLastWindowClosed(_ sender: NSApplication) -&gt; Bool {
    dummy_method_to_enforce_bundling()
    return true
  }
}
</code></pre>
<h3 id="-23"><a class="header" href="#-23"></a></h3>
<hr />
<h2 id="just-for-your-information"><a class="header" href="#just-for-your-information">Just for your information</a></h2>
<p>When it comes to building the libraries, you might be curious about the process. When you use the <code>cargo-xcode</code> command to create the Rust Xcode project, it also installs build rules. These build rules tell Xcode how to create the libraries during the build process. So, when Xcode builds the application, it first builds the subproject and then follows the build rules to create the necessary libraries.</p>
<blockquote>
<p><strong>Look twice!</strong> It's not the target of the Runner Project, but the target of the Rust subproject!</p>
</blockquote>
<figure style="margin:0;">
<a href="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/xcode/macos_build-rules.jpg" target="_blank">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/xcode/macos_build-rules.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Build rules generated by <i>cargo-xcode</i> (click to enlarge)</p></figcaption>
</a>
</figure>
<h2 id="workaround-workaround-workaround"><a class="header" href="#workaround-workaround-workaround">WORKAROUND WORKAROUND WORKAROUND</a></h2>
<p>When you have installed the <strong>version 1.5.0</strong> from <code>cargo-xcode</code> (as you can see in the <em>Build rules</em> image above), Flutter will not be able to find the dynamic library. You'll get an error like this:</p>
<pre><code>Launching lib/main.dart on macOS in debug mode...
--- xcodebuild: WARNING: Using the first of multiple matching destinations:
{ platform:macOS, arch:arm64, id:00008103-001251441A62001E }
{ platform:macOS, arch:x86_64, id:00008103-001251441A62001E }
Building macOS application...
dyld[64001]: Library not loaded: /usr/local/lib/rust.dylib
  Referenced from: &lt;29A02B41-EAF9-315B-977F-429B4DD80404&gt; /Users/kaimueller/Documents/iota_for_flutter/example2/build/macos/Build/Products/Debug/example2.app/Contents/MacOS/example2
  Reason: tried: '/usr/local/lib/rust.dylib' (no such file), '/System/Volumes/Preboot/Cryptexes/OS/usr/local/lib/rust.dylib' (no such file), '/usr/local/lib/rust.dylib' (no such file), '/usr/lib/rust.dylib' (no such file, not in dyld cache)
Error waiting for a debug connection: The log reader stopped unexpectedly, or never started.
Error launching application on macOS.
</code></pre>
<p>Here's the solution:</p>
<figure style="margin:0;">
<a style="width:50%" href="https://github.com/fzyzcjy/flutter_rust_bridge/issues/870" target="_blank">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/dylib_workaround.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Workaround for "rust.dylib (no such file)" - click to go to Issue 870</p></figcaption>
</a>
</figure>
<ol>
<li>In VS Code, open file <em>rust/rust.xcodeproj/project.pbxproj</em>.</li>
<li>Search for the 2 lines with the text <code>CARGO_XCODE_FEATURES = &quot;&quot;;</code></li>
<li>Insert a new line after each of these lines and insert
<pre><code>DYLIB_INSTALL_NAME_BASE = &quot;$(TARGET_BUILD_DIR)&quot;;
</code></pre>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><h1 id="part-5-ios-specific-instructions"><a class="header" href="#part-5-ios-specific-instructions">Part 5: iOS specific instructions</a></h1>
<hr />
<p>FRB Template App: Applying the <strong><a href="building-without-iota/flutter-and-rust/frb-example-app/../frb-example-app">modified Workflow</a></strong>.</p>
<hr />
<h2 id="ios-steps"><a class="header" href="#ios-steps">iOS steps</a></h2>
<h3 id="generate-the-dart-interface-2"><a class="header" href="#generate-the-dart-interface-2">Generate the Dart Interface</a></h3>
<p>Our next task is to create the generated code. This will also copy the C header file <code>bridge_generated.h</code> into the folder <em>ios/Runner/</em>. Use this command (you need to be in the root of your project):</p>
<pre><code>flutter_rust_bridge_codegen \
--rust-input rust/src/api.rs \
--dart-output ./lib/bridge_generated.dart \
--dart-decl-output ./lib/bridge_definitions.dart \
--c-output ios/Runner/bridge_generated.h
</code></pre>
<h3 id="create-the-subproject-1"><a class="header" href="#create-the-subproject-1">Create the subproject</a></h3>
<p>How is a subproject created in Xcode?</p>
<p>Simply open the <em>ios/Runner.xcodeproj</em> in Xcode, open the <em>rust/</em> directory in Finder and drag the <em>rust.xcodeproj</em> into the Runner folder. The next images will illustrate the steps.</p>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/ios_instructions/ios_xcodeproj.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Open <i>Runner.xcodeproj</i></p></figcaption>
</figure>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/ios_instructions/ios_drag_rust.png" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Drag the file <i>rust.xcodeproj</i> into the Runner Project</p></figcaption>
</figure>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/ios_instructions/ios_subproject.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>The new subproject</p></figcaption>
</figure>
<h3 id="adjust-the-runner-targets-build-phases-1"><a class="header" href="#adjust-the-runner-targets-build-phases-1">Adjust the Runner Target's <em>Build Phases</em></a></h3>
<p><a href="https://cjycode.com/flutter_rust_bridge/integrate/ios_linking.html" target="_blank">For iOS, FRB recommends to include the static library.</a></p>
<p>a) In Runner Target's <em>Build Phase</em> -&gt; <em>Target Dependencies</em>:</p>
<p>Click on &quot;+&quot; and select <code>rust-staticlib</code>.</p>
<p>b) In Runner Target's <em>Build Phase</em> -&gt; <em>Link Binary with Libraries</em>:</p>
<p>Click on &quot;+&quot; and select <code>librust_static.a</code>.</p>
<figure style="margin:0;">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/ios_instructions/ios_build_phase.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Adjusted Build Phase</p></figcaption>
</figure>
<h3 id="adjust-the-runner-bridging-headerh-file"><a class="header" href="#adjust-the-runner-bridging-headerh-file">Adjust the <em>Runner-Bridging-Header.h</em> file</a></h3>
<p>Switch to Visual Studio Code and open the file <code>ios/Runner/Runner-Bridging-Header.h</code> to add our generated header file <code>bridge_generated.h</code>.</p>
<p>Add the line:</p>
<pre><code>#import &quot;bridge_generated.h&quot;
</code></pre>
<p>The content should look like:</p>
<pre><code>#import &quot;GeneratedPluginRegistrant.h&quot;
#import &quot;bridge_generated.h&quot;
</code></pre>
<h3 id="adjust-the-appdelegateswift-file-1"><a class="header" href="#adjust-the-appdelegateswift-file-1">Adjust the <code>AppDelegate.swift</code> file</a></h3>
<p>In Visual Studio Code, open the file <code>ios/Runner/AppDelegate.swift</code>. We need to call the function <em>dummy_method_to_enforce_bundling()</em> (from FRB) somewhere to avoid that Xcode doesn't handle our library as dead code.</p>
<p>Add:</p>
<pre><code>let dummy = dummy_method_to_enforce_bundling()
print(dummy)
</code></pre>
<p>Your file should look like:</p>
<pre><code>import UIKit
import Flutter

@UIApplicationMain
@objc class AppDelegate: FlutterAppDelegate {
  override func application(
    _ application: UIApplication,
    didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?
  ) -&gt; Bool {
    let dummy = dummy_method_to_enforce_bundling()
    print(dummy)
    GeneratedPluginRegistrant.register(with: self)
    return super.application(application, didFinishLaunchingWithOptions: launchOptions)
  }
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="part-6-flutter-part"><a class="header" href="#part-6-flutter-part">Part 6: Flutter part</a></h1>
<hr />
<p>FRB Template App: Applying the <strong><a href="building-without-iota/flutter-and-rust/frb-example-app/../frb-example-app">modified Workflow</a></strong>.</p>
<hr />
<h2 id="flutter-instructions"><a class="header" href="#flutter-instructions">Flutter instructions</a></h2>
<h3 id="create-helper-file"><a class="header" href="#create-helper-file">Create helper file</a></h3>
<p>Let's make a new file in the <em>lib/</em> directory called <code>ffi.dart</code>. This file will help us load the library into our code. Here's what you should put inside the file:</p>
<pre><code>// This file initializes the dynamic library and connects it with the stub
// generated by flutter_rust_bridge_codegen.

import 'dart:ffi';

import 'bridge_generated.dart';
import 'bridge_definitions.dart';
export 'bridge_definitions.dart';

// Re-export the bridge so it is only necessary to import this file.
export 'bridge_generated.dart';
import 'dart:io' as io;

const _base = 'rust';

// On MacOS, the dynamic library is not bundled with the binary,
// but rather directly **linked** against the binary.
final _dylib = io.Platform.isWindows ? '$_base.dll' : 'lib$_base.so';

final Rust api = RustImpl(io.Platform.isIOS || io.Platform.isMacOS
    ? DynamicLibrary.executable()
    : DynamicLibrary.open(_dylib));
</code></pre>
<h3 id="create-your-maindart-file"><a class="header" href="#create-your-maindart-file">Create your <code>main.dart</code> file</a></h3>
<p>This is where your Flutter app starts its journey! Usually, you'd have to write all the code yourself, but in this case, simply replace the entire content of the file with:</p>
<pre><code>import 'package:flutter/material.dart';
import 'ffi.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({Key? key}) : super(key: key);

  // This widget is the root of your application.
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      theme: ThemeData(
        // This is the theme of your application.
        //
        // Try running your application with &quot;flutter run&quot;. You'll see the
        // application has a blue toolbar. Then, without quitting the app, try
        // changing the primarySwatch below to Colors.green and then invoke
        // &quot;hot reload&quot; (press &quot;r&quot; in the console where you ran &quot;flutter run&quot;,
        // or simply save your changes to &quot;hot reload&quot; in a Flutter IDE).
        // Notice that the counter didn't reset back to zero; the application
        // is not restarted.
        primarySwatch: Colors.blue,
      ),
      home: const MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}

class MyHomePage extends StatefulWidget {
  const MyHomePage({Key? key, required this.title}) : super(key: key);

  // This widget is the home page of your application. It is stateful, meaning
  // that it has a State object (defined below) that contains fields that affect
  // how it looks.

  // This class is the configuration for the state. It holds the values (in this
  // case the title) provided by the parent (in this case the App widget) and
  // used by the build method of the State. Fields in a Widget subclass are
  // always marked &quot;final&quot;.

  final String title;

  @override
  State&lt;MyHomePage&gt; createState() =&gt; _MyHomePageState();
}

class _MyHomePageState extends State&lt;MyHomePage&gt; {
  // These futures belong to the state and are only initialized once,
  // in the initState method.
  late Future&lt;Platform&gt; platform;
  late Future&lt;bool&gt; isRelease;

  @override
  void initState() {
    super.initState();
    platform = api.platform();
    isRelease = api.rustReleaseMode();
  }

  @override
  Widget build(BuildContext context) {
    // This method is rerun every time setState is called.
    //
    // The Flutter framework has been optimized to make rerunning build methods
    // fast, so that you can just rebuild anything that needs updating rather
    // than having to individually change instances of widgets.
    return Scaffold(
      appBar: AppBar(
        // Here we take the value from the MyHomePage object that was created by
        // the App.build method, and use it to set our appbar title.
        title: Text(widget.title),
      ),
      body: Center(
        // Center is a layout widget. It takes a single child and positions it
        // in the middle of the parent.
        child: Column(
          // Column is also a layout widget. It takes a list of children and
          // arranges them vertically. By default, it sizes itself to fit its
          // children horizontally, and tries to be as tall as its parent.
          //
          // Invoke &quot;debug painting&quot; (press &quot;p&quot; in the console, choose the
          // &quot;Toggle Debug Paint&quot; action from the Flutter Inspector in Android
          // Studio, or the &quot;Toggle Debug Paint&quot; command in Visual Studio Code)
          // to see the wireframe for each widget.
          //
          // Column has various properties to control how it sizes itself and
          // how it positions its children. Here we use mainAxisAlignment to
          // center the children vertically; the main axis here is the vertical
          // axis because Columns are vertical (the cross axis would be
          // horizontal).
          mainAxisAlignment: MainAxisAlignment.center,
          children: &lt;Widget&gt;[
            const Text(&quot;You're running on&quot;),
            // To render the results of a Future, a FutureBuilder is used which
            // turns a Future into an AsyncSnapshot, which can be used to
            // extract the error state, the loading state and the data if
            // available.
            //
            // Here, the generic type that the FutureBuilder manages is
            // explicitly named, because if omitted the snapshot will have the
            // type of AsyncSnapshot&lt;Object?&gt;.
            FutureBuilder&lt;List&lt;dynamic&gt;&gt;(
              // We await two unrelated futures here, so the type has to be
              // List&lt;dynamic&gt;.
              future: Future.wait([platform, isRelease]),
              builder: (context, snap) {
                final style = Theme.of(context).textTheme.headline4;
                if (snap.error != null) {
                  // An error has been encountered, so give an appropriate response and
                  // pass the error details to an unobstructive tooltip.
                  debugPrint(snap.error.toString());
                  return Tooltip(
                    message: snap.error.toString(),
                    child: Text('Unknown OS', style: style),
                  );
                }

                // Guard return here, the data is not ready yet.
                final data = snap.data;
                if (data == null) return const CircularProgressIndicator();

                // Finally, retrieve the data expected in the same order provided
                // to the FutureBuilder.future.
                final Platform platform = data[0];
                final release = data[1] ? 'Release' : 'Debug';
                final text = const {
                      Platform.Android: 'Android',
                      Platform.Ios: 'iOS',
                      Platform.MacApple: 'MacOS with Apple Silicon',
                      Platform.MacIntel: 'MacOS',
                      Platform.Windows: 'Windows',
                      Platform.Unix: 'Unix',
                      Platform.Wasm: 'the Web',
                    }[platform] ??
                    'Unknown OS';
                return Text('$text ($release)', style: style);
              },
            )
          ],
        ),
      ),
    );
  }
}

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="part-7-build-and-run"><a class="header" href="#part-7-build-and-run">Part 7: Build and Run</a></h1>
<hr />
<p>FRB Template App: Applying the <strong><a href="building-without-iota/flutter-and-rust/frb-example-app/../frb-example-app">modified Workflow</a></strong>.</p>
<hr />
<p>All the necessary steps have been completed. If you're unsure about how to build and run the app for different targets, please refer to the launch instructions provided in <a href="building-without-iota/flutter-and-rust/frb-example-app/../../flutter-only.html">Flutter only</a>.</p>
<h2 id="build-and-run-on-android"><a class="header" href="#build-and-run-on-android">Build and run on Android</a></h2>
<figure style="margin:0;">
<a href="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/run_android.jpg" target="_blank">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/run_android.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Run on Android (click to enlarge)</p></figcaption>
</a>
</figure>
<h2 id="build-and-run-on-macos"><a class="header" href="#build-and-run-on-macos">Build and run on macOS</a></h2>
<figure style="margin:0;">
<a href="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/run_macos.jpg" target="_blank">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/run_macos.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Run on macos (click to enlarge)</p></figcaption>
</a>
</figure>
<h2 id="build-and-run-on-ios"><a class="header" href="#build-and-run-on-ios">Build and run on iOS</a></h2>
<figure style="margin:0;">
<a href="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/run_ios.jpg" target="_blank">
<img src="building-without-iota/flutter-and-rust/frb-example-app/../../../assets/run_ios.jpg" alt=""><figcaption style="font-size: 0.8em;text-align:center;"><p>Run on iOS (click to enlarge)</p></figcaption>
</a>
</figure>
<div style="break-before: page; page-break-before: always;"></div><h1 id="logging-example-app"><a class="header" href="#logging-example-app">Logging Example App</a></h1>
<hr />
<p>Logging: Stream Rust log messages (trace, debug, warn, info, error) to Flutter.</p>
<hr />
<h2 id="stream"><a class="header" href="#stream">Stream</a></h2>
<p>This chapter will focus on implementing logging in a Flutter + Rust application. When it comes to handling scenarios where you create a data consumer once and keep adding data to it continuously, Flutter provides a very useful abstraction called a <code>Stream</code>.</p>
<p>In this way, it is possible to create a function with little code that sends log messages from Rust to Flutter. Streaming in the opposite direction, from Flutter to Rust, unfortunately is not possible.</p>
<h2 id="what-is-our-goal"><a class="header" href="#what-is-our-goal">What is our goal?</a></h2>
<p>The aim is to use logger macros on the Rust side, such as trace!, debug!, warn!, info!, and error!, and integrate them into the Rust code in the application. Flutter is supposed to process the incoming log entries.</p>
<p>Here, in a slightly modified form, I present the logging example of the Flutter-Rust-Bridge:</p>
<p><a href="https://cjycode.com/flutter_rust_bridge/feature/logging.html" target="_blank">üëâ ¬† Flutter Rust Bridge - Logging</a></p>
<p>The app uses the Flutter Chat UI plugin, which displays a list of incoming messages and allows users to send their own messages. For demonstration purposes, this message is converted into multiple log messages on the Rust side. Flutter receives the entries and can decide using a switch whether the new entry should be streamed to the chat list or to the console.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="resources"><a class="header" href="#resources">Resources</a></h1>
<hr />
<p>Watch the video, check the source code and explore the Github Repository.</p>
<hr />
<h2 id="warning-the-name-of-your-project-matters"><a class="header" href="#warning-the-name-of-your-project-matters">WARNING: The name of your project matters!</a></h2>
<blockquote>
<p><strong>Don't name your project &quot;logging&quot;</strong>!</p>
<p><strong>&quot;logging&quot;</strong> is the name of an <strong>existing</strong> Flutter package (search for it in <a href="https://pub.dev/packages?q=logging" target="_blank">Flutter packages</a>)...<br />
... which is a dependency of the package &quot;ffigen&quot; ...<br />
... which is a dependency of YOUR project!</p>
<p>If your project name was &quot;logging&quot; you would run into serious troubles at some point:</p>
<figure style="margin:0;"><img src="building-without-iota/flutter-and-rust/logging-example-app/../../../assets/logging_troubles.jpg" alt=""></figure>
</blockquote>
<h2 id="rust-code-snippets"><a class="header" href="#rust-code-snippets">Rust Code Snippets</a></h2>
<h3 id="cargotoml"><a class="header" href="#cargotoml">Cargo.toml</a></h3>
<pre><code>[package]
name = &quot;rust&quot;
version = &quot;0.1.0&quot;
edition = &quot;2021&quot;

# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html

[dependencies]
flutter_rust_bridge = &quot;1&quot;

# For the logger
lazy_static = &quot;1.4.0&quot;
log = &quot;0.4.17&quot;
simplelog = &quot;0.12.0&quot;
parking_lot = &quot;0.12.1&quot;
anyhow = &quot;1&quot;

[lib]
crate-type = [&quot;staticlib&quot;, &quot;cdylib&quot;]
</code></pre>
<h3 id="loggerrs"><a class="header" href="#loggerrs">logger.rs</a></h3>
<pre><code>use std::sync::Once;
use std::time::{Duration, SystemTime, UNIX_EPOCH};

use flutter_rust_bridge::StreamSink;
use lazy_static::lazy_static;
use log::{error, info, warn, Log, Metadata, Record};
use parking_lot::RwLock;
use simplelog::*;

use crate::api::LogEntry;

static INIT_LOGGER_ONCE: Once = Once::new();

pub fn init_logger() {

    INIT_LOGGER_ONCE.call_once(|| {
        let level = LevelFilter::Debug;

        assert!(
            level &lt;= log::STATIC_MAX_LEVEL,
            &quot;Should respect log::STATIC_MAX_LEVEL={:?}, which is done in compile time. level{:?}&quot;,
            log::STATIC_MAX_LEVEL,
            level
        );

        CombinedLogger::init(vec![
            Box::new(SendToDartLogger::new(level)),
            // Box::new(MyMobileLogger::new(level)),
            // #[cfg(not(any(target_os = &quot;android&quot;, target_os = &quot;ios&quot;)))]
            TermLogger::new(
                level,
                ConfigBuilder::new()
                    //.set_time_format_str(&quot;%H:%M:%S%.3f&quot;)
                    //.set_time_format_custom(format_description!(&quot;[hour]:[minute]:[second].[subsecond]&quot;))
                    .build(),
                TerminalMode::Mixed,
                ColorChoice::Auto,
            ),
        ])
        .unwrap_or_else(|e| {
            error!(&quot;init_logger (inside 'once') has error: {:?}&quot;, e);
        });
        info!(&quot;init_logger (inside 'once') finished&quot;);

        warn!(
            &quot;init_logger finished, chosen level={:?} (deliberately output by warn level)&quot;,
            level
        );
    });
}

lazy_static! {
    static ref SEND_TO_DART_LOGGER_STREAM_SINK: RwLock&lt;Option&lt;StreamSink&lt;LogEntry&gt;&gt;&gt; =
        RwLock::new(None);
}

pub struct SendToDartLogger {
    level: LevelFilter,
}

impl SendToDartLogger {
    pub fn set_stream_sink(stream_sink: StreamSink&lt;LogEntry&gt;) {
        let mut guard = SEND_TO_DART_LOGGER_STREAM_SINK.write();
        let overriding = guard.is_some();

        *guard = Some(stream_sink);

        drop(guard);

        if overriding {
            warn!(
                &quot;SendToDartLogger::set_stream_sink but already exist a sink, thus overriding. \
                (This may or may not be a problem. It will happen normally if hot-reload Flutter app.)&quot;
            );
        }
    }

    pub fn new(level: LevelFilter) -&gt; Self {
        SendToDartLogger { level }
    }

    fn record_to_entry(record: &amp;Record) -&gt; LogEntry {
        let time_millis = SystemTime::now()
            .duration_since(UNIX_EPOCH)
            .unwrap_or_else(|_| Duration::from_secs(0))
            .as_millis() as i64;

        let level = match record.level() {
            Level::Trace =&gt; Self::LEVEL_TRACE,
            Level::Debug =&gt; Self::LEVEL_DEBUG,
            Level::Info =&gt; Self::LEVEL_INFO,
            Level::Warn =&gt; Self::LEVEL_WARN,
            Level::Error =&gt; Self::LEVEL_ERROR,
        };


        let whole_msg = format!(&quot;{}&quot;, record.args());
        let tag;
        let user_id;
        let user;
        let msg;

        if whole_msg.starts_with(&quot;my_domain&quot;) {
            let vector: Vec&lt;&amp;str&gt; = whole_msg.split(&quot;@@@&quot;).collect();
            //Position 1: Domain
            //Position 2: Tag
            tag = format!(&quot;{}&quot;, vector[1]);
            //Position 3: User-ID
            user_id = format!(&quot;{}&quot;, vector[2]).to_string();
            //Position 4: User
            user = format!(&quot;{}&quot;, vector[3]).to_string();
            //Position 5: Message
            msg = format!(&quot;{}&quot;, vector[4]);
        } else {
            tag = record.file().unwrap_or_else(|| record.target()).to_owned().to_string();
            user_id = &quot;&quot;.into();
            user = &quot;&quot;.into();
            msg = format!(&quot;{}&quot;, record.args());
        }

        LogEntry {
            time_millis,
            level,
            tag,
            user_id,
            user,
            msg,
        }
    }

    const LEVEL_TRACE: i32 = 5000;
    const LEVEL_DEBUG: i32 = 10000;
    const LEVEL_INFO: i32 = 20000;
    const LEVEL_WARN: i32 = 30000;
    const LEVEL_ERROR: i32 = 40000;
}

impl Log for SendToDartLogger {
    fn enabled(&amp;self, _metadata: &amp;Metadata) -&gt; bool {
        true
    }

    fn log(&amp;self, record: &amp;Record) {
        let entry = Self::record_to_entry(record);
        if let Some(sink) = &amp;*SEND_TO_DART_LOGGER_STREAM_SINK.read() {
            sink.add(entry);
        }
    }

    fn flush(&amp;self) {
        // no need
    }
}

impl SharedLogger for SendToDartLogger {
    fn level(&amp;self) -&gt; LevelFilter {
        self.level
    }

    fn config(&amp;self) -&gt; Option&lt;&amp;Config&gt; {
        None
    }

    fn as_log(self: Box&lt;Self&gt;) -&gt; Box&lt;dyn Log&gt; {
        Box::new(*self)
    }
}
</code></pre>
<h3 id="apirs"><a class="header" href="#apirs">api.rs</a></h3>
<pre><code>use crate::logger;

use anyhow::Result;
use flutter_rust_bridge::StreamSink;

use log::{trace, debug, warn, info, error};

pub struct LogEntry {
    pub time_millis: i64,
    pub level: i32,
    pub tag: String,
    pub user_id: String,
    pub user: String,
    pub msg: String,
}

// Dummy function to fix Rust compiler complaints...
// See https://github.com/fzyzcjy/flutter_rust_bridge/issues/398
// Workaround:
// 1. Save Rust Code
// 2. Execute flutter_rust_bridge_codegen command
// 3. Make any change to Rust code (e.g. add blank) and save again
//    -&gt; next compile is ok
#[allow(dead_code, unused_variables)]
pub fn dummy(a: LogEntry) {}


pub fn rust_set_up() -&gt; String {
    logger::init_logger();
    &quot;Logger was initialized&quot;.into()
}

pub fn create_log_stream(s: StreamSink&lt;LogEntry&gt;) -&gt; Result&lt;()&gt; {
    logger::SendToDartLogger::set_stream_sink(s);
    Ok(())
}

pub fn publish_message(message: String) {

    trace!(&quot;TRACE   --------------- {}&quot;, message );
    debug!(&quot;DEBUG   --------------- {}&quot;, message );
    warn!(&quot;WARNING --------------- {}&quot;, message );
    info!(&quot;INFO    --------------- {}&quot;, message );
    error!(&quot;ERROR   --------------- {}&quot;, message );

    debug!(&quot;my_domain@@@my_tag@@@uuid@@@name@@@This logger message comes from RUST:\n{}&quot;, message );

}
</code></pre>
<p>To fix Rust compilation complains, add:</p>
<pre><code>

</code></pre>
<h3 id="librs"><a class="header" href="#librs">lib.rs</a></h3>
<pre><code>mod api;
mod logger;
</code></pre>
<h2 id="flutter--dart-code-snippets"><a class="header" href="#flutter--dart-code-snippets">Flutter / Dart Code Snippets</a></h2>
<h3 id="pubspecyaml"><a class="header" href="#pubspecyaml">pubspec.yaml</a></h3>
<p><strong>Don't just copy &amp; paste the content of pubspec.yaml</strong> </p>
<blockquote>
<p>You have to adjust the property <em>name</em> in line 1:<br />
replace the value <em>&lt;NAME_OF_YOUR_PROJECT&gt;</em> by the name of your project</p>
</blockquote>
<pre><code>name: &lt;NAME_OF_YOUR_PROJECT&gt;
description: Logging Example App.
publish_to: 'none' # Remove this line if you wish to publish to pub.dev
version: 1.0.0+1

environment:
  sdk: '&gt;=2.19.6 &lt;3.0.0'

dependencies:
  flutter:
    sdk: flutter

  cupertino_icons: ^1.0.2
  ffi: ^2.0.2
  flutter_rust_bridge: ^1.75.2
  freezed_annotation: ^2.2.0
  flutter_chat_ui: ^1.6.6
  file_picker: ^5.3.0
  image_picker: ^0.8.7+4
  open_filex: ^4.3.2
  path_provider: ^2.0.15

dev_dependencies:
  flutter_test:
    sdk: flutter

  flutter_lints: ^2.0.0
  ffigen: ^7.2.11
  build_runner: ^2.3.3
  freezed: ^2.3.3

flutter:

   uses-material-design: true

</code></pre>
<h3 id="ffidart"><a class="header" href="#ffidart">ffi.dart</a></h3>
<pre><code>// This file initializes the dynamic library and connects it with the stub
// generated by flutter_rust_bridge_codegen.

import 'dart:ffi';

import 'bridge_generated.dart';
import 'bridge_definitions.dart';
export 'bridge_definitions.dart';

// Re-export the bridge so it is only necessary to import this file.
export 'bridge_generated.dart';
import 'dart:io' as io;

const _base = 'rust';

// On MacOS, the dynamic library is not bundled with the binary,
// but rather directly **linked** against the binary.
final _dylib = io.Platform.isWindows ? '$_base.dll' : 'lib$_base.so';

final Rust api = RustImpl(io.Platform.isIOS || io.Platform.isMacOS
    ? DynamicLibrary.executable()
    : DynamicLibrary.open(_dylib));
</code></pre>
<h3 id="maindart"><a class="header" href="#maindart">main.dart</a></h3>
<pre><code>import 'dart:convert';
import 'dart:io';

import 'package:file_picker/file_picker.dart';
import 'package:flutter/material.dart';
import 'package:flutter/services.dart' show rootBundle;
import 'package:flutter_chat_types/flutter_chat_types.dart' as types;
import 'package:flutter_chat_ui/flutter_chat_ui.dart';
import 'package:http/http.dart' as http;
import 'package:image_picker/image_picker.dart';
import 'package:intl/date_symbol_data_local.dart';
import 'package:mime/mime.dart';
import 'package:open_filex/open_filex.dart';
import 'package:path_provider/path_provider.dart';
import 'package:uuid/uuid.dart';

import 'ffi.dart';

void main() {
  initializeDateFormatting().then((_) =&gt; runApp(const MyApp()));
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) =&gt; const MaterialApp(
        home: ChatPage(),
      );
}

class ChatPage extends StatefulWidget {
  const ChatPage({super.key});

  @override
  State&lt;ChatPage&gt; createState() =&gt; _ChatPageState();
}

class _ChatPageState extends State&lt;ChatPage&gt; {
  List&lt;types.Message&gt; _messages = [];
  final _user = const types.User(id: '82091008-a484-4a89-ae75-a22bf8d6f3ac');

  final _tag = &quot;my_tag&quot;;

  @override
  void initState() {
    super.initState();

    _setup();
  }

  @override
  Widget build(BuildContext context) =&gt; Scaffold(
        body: Chat(
          messages: _messages,
          onAttachmentPressed: null, //_handleAttachmentPressed,
          onMessageTap: _handleMessageTap,
          onPreviewDataFetched: null, //_handlePreviewDataFetched,
          onSendPressed: _handleSendPressed,
          showUserAvatars: true,
          showUserNames: true,
          user: _user,
        ),
      );

  void _addMessage(types.Message message) {
    setState(() {
      _messages.insert(0, message);
    });
  }

  void _handleAttachmentPressed() {
    showModalBottomSheet&lt;void&gt;(
      context: context,
      builder: (BuildContext context) =&gt; SafeArea(
        child: SizedBox(
          height: 144,
          child: Column(
            crossAxisAlignment: CrossAxisAlignment.stretch,
            children: &lt;Widget&gt;[
              TextButton(
                onPressed: () {
                  Navigator.pop(context);
                  _handleImageSelection();
                },
                child: const Align(
                  alignment: AlignmentDirectional.centerStart,
                  child: Text('Photo'),
                ),
              ),
              TextButton(
                onPressed: () {
                  Navigator.pop(context);
                  _handleFileSelection();
                },
                child: const Align(
                  alignment: AlignmentDirectional.centerStart,
                  child: Text('File'),
                ),
              ),
              TextButton(
                onPressed: () =&gt; Navigator.pop(context),
                child: const Align(
                  alignment: AlignmentDirectional.centerStart,
                  child: Text('Cancel'),
                ),
              ),
            ],
          ),
        ),
      ),
    );
  }

  void _handleFileSelection() async {
    final result = await FilePicker.platform.pickFiles(
      type: FileType.any,
    );

    if (result != null &amp;&amp; result.files.single.path != null) {
      final message = types.FileMessage(
        author: _user,
        createdAt: DateTime.now().millisecondsSinceEpoch,
        id: const Uuid().v4(),
        mimeType: lookupMimeType(result.files.single.path!),
        name: result.files.single.name,
        size: result.files.single.size,
        uri: result.files.single.path!,
      );

      _addMessage(message);
    }
  }

  void _handleImageSelection() async {
    final result = await ImagePicker().pickImage(
      imageQuality: 70,
      maxWidth: 1440,
      source: ImageSource.gallery,
    );

    if (result != null) {
      final bytes = await result.readAsBytes();
      final image = await decodeImageFromList(bytes);

      final message = types.ImageMessage(
        author: _user,
        createdAt: DateTime.now().millisecondsSinceEpoch,
        height: image.height.toDouble(),
        id: const Uuid().v4(),
        name: result.name,
        size: bytes.length,
        uri: result.path,
        width: image.width.toDouble(),
      );

      _addMessage(message);
    }
  }

  void _handleMessageTap(BuildContext _, types.Message message) async {
    if (message is types.FileMessage) {
      var localPath = message.uri;

      if (message.uri.startsWith('http')) {
        try {
          final index =
              _messages.indexWhere((element) =&gt; element.id == message.id);
          final updatedMessage =
              (_messages[index] as types.FileMessage).copyWith(
            isLoading: true,
          );

          setState(() {
            _messages[index] = updatedMessage;
          });

          final client = http.Client();
          final request = await client.get(Uri.parse(message.uri));
          final bytes = request.bodyBytes;
          final documentsDir = (await getApplicationDocumentsDirectory()).path;
          localPath = '$documentsDir/${message.name}';

          if (!File(localPath).existsSync()) {
            final file = File(localPath);
            await file.writeAsBytes(bytes);
          }
        } finally {
          final index =
              _messages.indexWhere((element) =&gt; element.id == message.id);
          final updatedMessage =
              (_messages[index] as types.FileMessage).copyWith(
            isLoading: null,
          );

          setState(() {
            _messages[index] = updatedMessage;
          });
        }
      }

      await OpenFilex.open(localPath);
    }
  }

  void _handlePreviewDataFetched(
    types.TextMessage message,
    types.PreviewData previewData,
  ) {
    final index = _messages.indexWhere((element) =&gt; element.id == message.id);
    final updatedMessage = (_messages[index] as types.TextMessage).copyWith(
      previewData: previewData,
    );

    setState(() {
      _messages[index] = updatedMessage;
    });
  }

  void _handleSendPressed(types.PartialText message) {
    final textMessage = types.TextMessage(
      author: _user,
      createdAt: DateTime.now().millisecondsSinceEpoch,
      id: const Uuid().v4(),
      text: message.text,
    );

    //_addMessage(textMessage);
    _callFfiPublishMessage(message.text);
  }

  void _loadMessages() async {
    final response = await rootBundle.loadString('assets/messages.json');
    final messages = (jsonDecode(response) as List)
        .map((e) =&gt; types.Message.fromJson(e as Map&lt;String, dynamic&gt;))
        .toList();

    setState(() {
      _messages = messages;
    });
  }

  //------- STREAMING &amp; LOGGING --------------------------------------------

  types.TextMessage createTextMessage(
      String userId, String user, String newMessage, int timeMillis) {
    final userObject = types.User(
      id: userId,
    );
    final textMessage = types.TextMessage(
      author: userObject,
      createdAt: timeMillis,
      id: const Uuid().v4(),
      text: newMessage,
    );
    return textMessage;
  }

  Future&lt;void&gt; _callFfiPublishMessage(String message) async {
    await api.publishMessage(message: message);
  }

  Future&lt;void&gt; _setup() async {

    String _result = await api.rustSetUp();
    _addMessage(createTextMessage(
        &quot;uuid&quot;, &quot;&quot;, _result, DateTime.now().millisecondsSinceEpoch));

    api.createLogStream().listen((event) {
      if (event.tag == _tag) {
        _addMessage(createTextMessage(
            event.userId, event.user, event.msg, event.timeMillis));
      } else {
        print(
            'LOG FROM RUST: ${event.level} ${event.tag} ${event.userId} ${event.user} ${event.msg} ${event.timeMillis}');
      }
    });
  }
}

</code></pre>
<h2 id="video"><a class="header" href="#video">Video</a></h2>
<h2 id="github-repository"><a class="header" href="#github-repository">Github Repository</a></h2>
<p>You will find the complete source code from the video in this repository:</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script>
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
